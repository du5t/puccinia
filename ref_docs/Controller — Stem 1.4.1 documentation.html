<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Controller — Stem 1.4.1 documentation</title>
    
    <link rel="stylesheet" href="Controller%20%E2%80%94%20Stem%201.4.1%20documentation_files/haiku.css" type="text/css">
    <link rel="stylesheet" href="Controller%20%E2%80%94%20Stem%201.4.1%20documentation_files/pygments.css" type="text/css">
    <link rel="stylesheet" href="Controller%20%E2%80%94%20Stem%201.4.1%20documentation_files/style.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="Controller%20%E2%80%94%20Stem%201.4.1%20documentation_files/jquery.js"></script>
    <script type="text/javascript" src="Controller%20%E2%80%94%20Stem%201.4.1%20documentation_files/underscore.js"></script>
    <script type="text/javascript" src="Controller%20%E2%80%94%20Stem%201.4.1%20documentation_files/doctools.js"></script>
    <link rel="shortcut icon" href="https://stem.torproject.org/_static/favicon.png">
    <link rel="top" title="Stem 1.4.1 documentation" href="https://stem.torproject.org/index.html"> 
  <link href="Controller%20%E2%80%94%20Stem%201.4.1%20documentation_files/socialwidgets.css" type="text/css" rel="stylesheet"></head>
  <body>
      <div class="header"><img class="rightlogo" src="Controller%20%E2%80%94%20Stem%201.4.1%20documentation_files/logo.png" alt="Logo"><h1 class="heading"><a href="https://stem.torproject.org/index.html">
          <span>Stem Docs</span></a></h1>
        <h2 class="heading"><span>Controller</span></h2>
      </div>
      <div class="topnav">
      
        <p>

        </p><ul id="navbar">
          <li><a href="https://stem.torproject.org/index.html">Home</a></li>
          <li><a href="https://stem.torproject.org/tutorials.html">Tutorials</a>
            <ul>
              <li><a href="https://stem.torproject.org/tutorials/the_little_relay_that_could.html">Hello World</a></li>
              <li><a href="https://stem.torproject.org/tutorials/to_russia_with_love.html">Client Usage</a></li>
              <li><a href="https://stem.torproject.org/tutorials/tortoise_and_the_hare.html">Event Listening</a></li>
              <li><a href="https://stem.torproject.org/tutorials/over_the_river.html">Hidden Services</a></li>
              <li><a href="https://stem.torproject.org/tutorials/mirror_mirror_on_the_wall.html">Tor Descriptors</a></li>
              <li><a href="https://stem.torproject.org/tutorials/east_of_the_sun.html">Utilities</a></li>
              <li><a href="https://stem.torproject.org/tutorials/down_the_rabbit_hole.html">Interpreter</a></li>
              <li><a href="https://stem.torproject.org/tutorials/double_double_toil_and_trouble.html">Examples</a></li>
            </ul>
          </li>
          <li><a href="https://stem.torproject.org/api.html">API</a>
            <ul>
              <li><a href="#">stem.control</a></li>
              <li><a href="https://stem.torproject.org/api/connection.html">stem.connection</a></li>
              <li><a href="https://stem.torproject.org/api/socket.html">stem.socket</a></li>
              <li><a href="https://stem.torproject.org/api/process.html">stem.process</a></li>
              <li><a href="https://stem.torproject.org/api/response.html">stem.response</a></li>
              <li><a href="https://stem.torproject.org/api/exit_policy.html">stem.exit_policy</a></li>
              <li><a href="https://stem.torproject.org/api/version.html">stem.version</a></li>
              <li><a href="https://stem.torproject.org/api.html#descriptors">Descriptors</a></li>
              <li><a href="https://stem.torproject.org/api.html#utilities">Utilities</a></li>
            </ul>
          </li>
          <li><a href="https://trac.torproject.org/projects/tor/wiki/doc/stem">Development</a>
            <ul>
              <li><a href="https://stem.torproject.org/faq.html">FAQ</a></li>
              <li><a href="https://stem.torproject.org/change_log.html">Change Log</a></li>
              <li><a href="https://trac.torproject.org/projects/tor/wiki/doc/stem/bugs">Bug Tracker</a></li>
              <li><a href="https://trac.torproject.org/projects/tor/wiki/doc/stem">Wiki</a></li>
              <li><a href="https://stem.torproject.org/download.html">Download</a></li>
            </ul>
          </li>
          <li><a href="https://stem.torproject.org/faq.html#where-can-i-get-help">Contact</a>
            <ul>
              <li><a href="https://lists.torproject.org/cgi-bin/mailman/listinfo/tor-dev">Email List</a></li>
              <li><a href="https://www.torproject.org/about/contact.html.en#irc">IRC</a></li>
              <li><a href="https://www.atagar.com/contact/">Author</a></li>
            </ul>
          </li>
        </ul>
        <p></p>

      </div>
      <div class="content">
        
        
  <div class="section" id="module-stem.control">
<span id="controller"></span><h1>Controller<a class="headerlink" href="#module-stem.control" title="Permalink to this headline">¶</a></h1>
<p>Module for interacting with the Tor control socket. The
<a class="reference internal" href="#stem.control.Controller" title="stem.control.Controller"><tt class="xref py py-class docutils literal"><span class="pre">Controller</span></tt></a> is a wrapper around a
<a class="reference internal" href="https://stem.torproject.org/api/socket.html#stem.socket.ControlSocket" title="stem.socket.ControlSocket"><tt class="xref py py-class docutils literal"><span class="pre">ControlSocket</span></tt></a>, retaining many of its methods (connect,
close, is_alive, etc) in addition to providing its own for working with the
socket at a higher level.</p>
<p>Stem has <a class="reference external" href="https://stem.torproject.org/faq.html#how-do-i-connect-to-tor">several ways</a> of getting a
<a class="reference internal" href="#stem.control.Controller" title="stem.control.Controller"><tt class="xref py py-class docutils literal"><span class="pre">Controller</span></tt></a>, but the most flexible are
<a class="reference internal" href="#stem.control.Controller.from_port" title="stem.control.Controller.from_port"><tt class="xref py py-func docutils literal"><span class="pre">from_port()</span></tt></a> and
<a class="reference internal" href="#stem.control.Controller.from_socket_file" title="stem.control.Controller.from_socket_file"><tt class="xref py py-func docutils literal"><span class="pre">from_socket_file()</span></tt></a>. These static
<a class="reference internal" href="#stem.control.Controller" title="stem.control.Controller"><tt class="xref py py-class docutils literal"><span class="pre">Controller</span></tt></a> methods give you an <strong>unauthenticated</strong>
Controller you can then authenticate yourself using its
<a class="reference internal" href="#stem.control.Controller.authenticate" title="stem.control.Controller.authenticate"><tt class="xref py py-func docutils literal"><span class="pre">authenticate()</span></tt></a> method. For example...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">getpass</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">stem</span>
<span class="kn">import</span> <span class="nn">stem.connection</span>

<span class="kn">from</span> <span class="nn">stem.control</span> <span class="kn">import</span> <span class="n">Controller</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
  <span class="k">try</span><span class="p">:</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">Controller</span><span class="o">.</span><span class="n">from_port</span><span class="p">()</span>
  <span class="k">except</span> <span class="n">stem</span><span class="o">.</span><span class="n">SocketError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Unable to connect to tor on port 9051: </span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="n">exc</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

  <span class="k">try</span><span class="p">:</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">authenticate</span><span class="p">()</span>
  <span class="k">except</span> <span class="n">stem</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">MissingPassword</span><span class="p">:</span>
    <span class="n">pw</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s">"Controller password: "</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
      <span class="n">controller</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="n">password</span> <span class="o">=</span> <span class="n">pw</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">stem</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">PasswordAuthFailed</span><span class="p">:</span>
      <span class="k">print</span><span class="p">(</span><span class="s">"Unable to authenticate, password is incorrect"</span><span class="p">)</span>
      <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="k">except</span> <span class="n">stem</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">AuthenticationFailure</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Unable to authenticate: </span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="n">exc</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

  <span class="k">print</span><span class="p">(</span><span class="s">"Tor is running version </span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="n">controller</span><span class="o">.</span><span class="n">get_version</span><span class="p">())</span>
  <span class="n">controller</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>If you're fine with allowing your script to raise exceptions then this can be more nicely done as...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stem.control</span> <span class="kn">import</span> <span class="n">Controller</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
  <span class="k">with</span> <span class="n">Controller</span><span class="o">.</span><span class="n">from_port</span><span class="p">()</span> <span class="k">as</span> <span class="n">controller</span><span class="p">:</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">authenticate</span><span class="p">()</span>

    <span class="k">print</span><span class="p">(</span><span class="s">"Tor is running version </span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="n">controller</span><span class="o">.</span><span class="n">get_version</span><span class="p">())</span>
</pre></div>
</div>
<p><strong>Module Overview:</strong></p>
<div class="highlight-python"><pre>Controller - General controller class intended for direct use
  | |- from_port - Provides a Controller based on a port connection.
  | +- from_socket_file - Provides a Controller based on a socket file connection.
  |
  |- authenticate - authenticates this controller with tor
  |
  |- get_info - issues a GETINFO query for a parameter
  |- get_version - provides our tor version
  |- get_exit_policy - provides our exit policy
  |- get_ports - provides the local ports where tor is listening for connections
  |- get_listeners - provides the addresses and ports where tor is listening for connections
  |- get_accounting_stats - provides stats related to relaying limits
  |- get_protocolinfo - information about the controller interface
  |- get_user - provides the user tor is running as
  |- get_pid - provides the pid of our tor process
  |- is_user_traffic_allowed - checks if we send or receive direct user traffic
  |
  |- get_microdescriptor - querying the microdescriptor for a relay
  |- get_microdescriptors - provides all currently available microdescriptors
  |- get_server_descriptor - querying the server descriptor for a relay
  |- get_server_descriptors - provides all currently available server descriptors
  |- get_network_status - querying the router status entry for a relay
  |- get_network_statuses - provides all preently available router status entries
  |- get_hidden_service_descriptor - queries the given hidden service descriptor
  |
  |- get_conf - gets the value of a configuration option
  |- get_conf_map - gets the values of multiple configuration options
  |- set_conf - sets the value of a configuration option
  |- reset_conf - reverts configuration options to their default values
  |- set_options - sets or resets the values of multiple configuration options
  |
  |- get_hidden_service_conf - provides our hidden service configuration
  |- set_hidden_service_conf - sets our hidden service configuration
  |- create_hidden_service - creates a new hidden service or adds a new port
  |- remove_hidden_service - removes a hidden service or drops a port
  |
  |- list_ephemeral_hidden_services - list ephemeral hidden serivces
  |- create_ephemeral_hidden_service - create a new ephemeral hidden service
  |- remove_ephemeral_hidden_service - removes an ephemeral hidden service
  |
  |- add_event_listener - attaches an event listener to be notified of tor events
  |- remove_event_listener - removes a listener so it isn't notified of further events
  |
  |- is_caching_enabled - true if the controller has enabled caching
  |- set_caching - enables or disables caching
  |- clear_cache - clears any cached results
  |
  |- load_conf - loads configuration information as if it was in the torrc
  |- save_conf - saves configuration information to the torrc
  |
  |- is_feature_enabled - checks if a given controller feature is enabled
  |- enable_feature - enables a controller feature that has been disabled by default
  |
  |- get_circuit - provides an active circuit
  |- get_circuits - provides a list of active circuits
  |- new_circuit - create new circuits
  |- extend_circuit - create new circuits and extend existing ones
  |- repurpose_circuit - change a circuit's purpose
  |- close_circuit - close a circuit
  |
  |- get_streams - provides a list of active streams
  |- attach_stream - attach a stream to a circuit
  |- close_stream - close a stream
  |
  |- signal - sends a signal to the tor client
  |- is_newnym_available - true if tor would currently accept a NEWNYM signal
  |- get_newnym_wait - seconds until tor would accept a NEWNYM signal
  |- get_effective_rate - provides our effective relaying rate limit
  |- is_geoip_unavailable - true if we've discovered our geoip db to be unavailable
  |- map_address - maps one address to another such that connections to the original are replaced with the other
  +- drop_guards - drops our set of guard relays and picks a new set

BaseController - Base controller class asynchronous message handling
  |- msg - communicates with the tor process
  |- is_alive - reports if our connection to tor is open or closed
  |- is_localhost - returns if the connection is for the local system or not
  |- connection_time - time when we last connected or disconnected
  |- is_authenticated - checks if we're authenticated to tor
  |- connect - connects or reconnects to tor
  |- close - shuts down our connection to the tor process
  |- get_socket - provides the socket used for control communication
  |- get_latest_heartbeat - timestamp for when we last heard from tor
  |- add_status_listener - notifies a callback of changes in our status
  |- remove_status_listener - prevents further notification of status changes
  +- __enter__ / __exit__ - manages socket connection</pre>
</div>
<dl class="data">
<dt id="stem.control.State">
<tt class="descclassname">stem.control.</tt><tt class="descname">State</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.control.State" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumeration for states that a controller can have.</p>
<table class="docutils" border="1">
<colgroup>
<col width="25%">
<col width="75%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">State</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>INIT</strong></td>
<td>new control connection</td>
</tr>
<tr class="row-odd"><td><strong>RESET</strong></td>
<td>received a reset/sighup signal</td>
</tr>
<tr class="row-even"><td><strong>CLOSED</strong></td>
<td>control connection closed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.control.EventType">
<tt class="descclassname">stem.control.</tt><tt class="descname">EventType</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.control.EventType" title="Permalink to this definition">¶</a></dt>
<dd><p>Known types of events that the
<a class="reference internal" href="#stem.control.Controller.add_event_listener" title="stem.control.Controller.add_event_listener"><tt class="xref py py-func docutils literal"><span class="pre">add_event_listener()</span></tt></a> method of the
<a class="reference internal" href="#stem.control.Controller" title="stem.control.Controller"><tt class="xref py py-class docutils literal"><span class="pre">Controller</span></tt></a> can listen for.</p>
<p>The most frequently listened for event types tend to be the logging events
(<strong>DEBUG</strong>, <strong>INFO</strong>, <strong>NOTICE</strong>, <strong>WARN</strong>, and <strong>ERR</strong>), bandwidth usage
(<strong>BW</strong>), and circuit or stream changes (<strong>CIRC</strong> and <strong>STREAM</strong>).</p>
<p>Enums are mapped to <a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.Event" title="stem.response.events.Event"><tt class="xref py py-class docutils literal"><span class="pre">Event</span></tt></a> subclasses as
follows...</p>
<table class="docutils" border="1">
<colgroup>
<col width="30%">
<col width="70%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">EventType</th>
<th class="head">Event Class</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>ADDRMAP</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.AddrMapEvent" title="stem.response.events.AddrMapEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.AddrMapEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>AUTHDIR_NEWDESCS</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.AuthDirNewDescEvent" title="stem.response.events.AuthDirNewDescEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.AuthDirNewDescEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>BUILDTIMEOUT_SET</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.BuildTimeoutSetEvent" title="stem.response.events.BuildTimeoutSetEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.BuildTimeoutSetEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>BW</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.BandwidthEvent" title="stem.response.events.BandwidthEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.BandwidthEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>CELL_STATS</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.CellStatsEvent" title="stem.response.events.CellStatsEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.CellStatsEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>CIRC</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.CircuitEvent" title="stem.response.events.CircuitEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.CircuitEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>CIRC_BW</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.CircuitBandwidthEvent" title="stem.response.events.CircuitBandwidthEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.CircuitBandwidthEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>CIRC_MINOR</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.CircMinorEvent" title="stem.response.events.CircMinorEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.CircMinorEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>CLIENTS_SEEN</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.ClientsSeenEvent" title="stem.response.events.ClientsSeenEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.ClientsSeenEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>CONF_CHANGED</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.ConfChangedEvent" title="stem.response.events.ConfChangedEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.ConfChangedEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>CONN_BW</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.ConnectionBandwidthEvent" title="stem.response.events.ConnectionBandwidthEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.ConnectionBandwidthEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>DEBUG</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.LogEvent" title="stem.response.events.LogEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.LogEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>DESCCHANGED</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.DescChangedEvent" title="stem.response.events.DescChangedEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.DescChangedEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>ERR</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.LogEvent" title="stem.response.events.LogEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.LogEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>GUARD</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.GuardEvent" title="stem.response.events.GuardEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.GuardEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>HS_DESC</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.HSDescEvent" title="stem.response.events.HSDescEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.HSDescEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>HS_DESC_CONTENT</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.HSDescContentEvent" title="stem.response.events.HSDescContentEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.HSDescContentEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>INFO</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.LogEvent" title="stem.response.events.LogEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.LogEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>NETWORK_LIVENESS</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.NetworkLivenessEvent" title="stem.response.events.NetworkLivenessEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.NetworkLivenessEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>NEWCONSENSUS</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.NewConsensusEvent" title="stem.response.events.NewConsensusEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.NewConsensusEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>NEWDESC</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.NewDescEvent" title="stem.response.events.NewDescEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.NewDescEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>NOTICE</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.LogEvent" title="stem.response.events.LogEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.LogEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>NS</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.NetworkStatusEvent" title="stem.response.events.NetworkStatusEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.NetworkStatusEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>ORCONN</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.ORConnEvent" title="stem.response.events.ORConnEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.ORConnEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>SIGNAL</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.SignalEvent" title="stem.response.events.SignalEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.SignalEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>STATUS_CLIENT</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.StatusEvent" title="stem.response.events.StatusEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.StatusEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>STATUS_GENERAL</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.StatusEvent" title="stem.response.events.StatusEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.StatusEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>STATUS_SERVER</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.StatusEvent" title="stem.response.events.StatusEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.StatusEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>STREAM</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.StreamEvent" title="stem.response.events.StreamEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.StreamEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>STREAM_BW</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.StreamBwEvent" title="stem.response.events.StreamBwEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.StreamBwEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>TB_EMPTY</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.TokenBucketEmptyEvent" title="stem.response.events.TokenBucketEmptyEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.TokenBucketEmptyEvent</span></tt></a></td>
</tr>
<tr class="row-odd"><td><strong>TRANSPORT_LAUNCHED</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.TransportLaunchedEvent" title="stem.response.events.TransportLaunchedEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.TransportLaunchedEvent</span></tt></a></td>
</tr>
<tr class="row-even"><td><strong>WARN</strong></td>
<td><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.LogEvent" title="stem.response.events.LogEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.LogEvent</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.control.Listener">
<tt class="descclassname">stem.control.</tt><tt class="descname">Listener</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.control.Listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Purposes for inbound connections that Tor handles.</p>
<table class="docutils" border="1">
<colgroup>
<col width="12%">
<col width="88%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Listener</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>OR</strong></td>
<td>traffic we're relaying as a member of the network (torrc's <strong>ORPort</strong> and <strong>ORListenAddress</strong>)</td>
</tr>
<tr class="row-odd"><td><strong>DIR</strong></td>
<td>mirroring for tor descriptor content (torrc's <strong>DirPort</strong> and <strong>DirListenAddress</strong>)</td>
</tr>
<tr class="row-even"><td><strong>SOCKS</strong></td>
<td>client traffic we're sending over Tor (torrc's <strong>SocksPort</strong> and <strong>SocksListenAddress</strong>)</td>
</tr>
<tr class="row-odd"><td><strong>TRANS</strong></td>
<td>transparent proxy handling (torrc's <strong>TransPort</strong> and <strong>TransListenAddress</strong>)</td>
</tr>
<tr class="row-even"><td><strong>NATD</strong></td>
<td>forwarding for ipfw NATD connections (torrc's <strong>NatdPort</strong> and <strong>NatdListenAddress</strong>)</td>
</tr>
<tr class="row-odd"><td><strong>DNS</strong></td>
<td>DNS lookups for our traffic (torrc's <strong>DNSPort</strong> and <strong>DNSListenAddress</strong>)</td>
</tr>
<tr class="row-even"><td><strong>CONTROL</strong></td>
<td>controller applications (torrc's <strong>ControlPort</strong> and <strong>ControlListenAddress</strong>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="stem.control.AccountingStats">
<em class="property">class </em><tt class="descclassname">stem.control.</tt><tt class="descname">AccountingStats</tt><a class="headerlink" href="#stem.control.AccountingStats" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">tuple</span></tt></p>
<p>AccountingStats(retrieved, status, interval_end, time_until_reset, 
read_bytes, read_bytes_left, read_limit, written_bytes, 
write_bytes_left, write_limit)</p>
<dl class="attribute">
<dt id="stem.control.AccountingStats.interval_end">
<tt class="descname">interval_end</tt><a class="headerlink" href="#stem.control.AccountingStats.interval_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.AccountingStats.read_bytes">
<tt class="descname">read_bytes</tt><a class="headerlink" href="#stem.control.AccountingStats.read_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.AccountingStats.read_bytes_left">
<tt class="descname">read_bytes_left</tt><a class="headerlink" href="#stem.control.AccountingStats.read_bytes_left" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 5</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.AccountingStats.read_limit">
<tt class="descname">read_limit</tt><a class="headerlink" href="#stem.control.AccountingStats.read_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 6</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.AccountingStats.retrieved">
<tt class="descname">retrieved</tt><a class="headerlink" href="#stem.control.AccountingStats.retrieved" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.AccountingStats.status">
<tt class="descname">status</tt><a class="headerlink" href="#stem.control.AccountingStats.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.AccountingStats.time_until_reset">
<tt class="descname">time_until_reset</tt><a class="headerlink" href="#stem.control.AccountingStats.time_until_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.AccountingStats.write_bytes_left">
<tt class="descname">write_bytes_left</tt><a class="headerlink" href="#stem.control.AccountingStats.write_bytes_left" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 8</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.AccountingStats.write_limit">
<tt class="descname">write_limit</tt><a class="headerlink" href="#stem.control.AccountingStats.write_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 9</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.AccountingStats.written_bytes">
<tt class="descname">written_bytes</tt><a class="headerlink" href="#stem.control.AccountingStats.written_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 7</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stem.control.UserTrafficAllowed">
<em class="property">class </em><tt class="descclassname">stem.control.</tt><tt class="descname">UserTrafficAllowed</tt><a class="headerlink" href="#stem.control.UserTrafficAllowed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">tuple</span></tt></p>
<p>UserTrafficAllowed(inbound, outbound)</p>
<dl class="attribute">
<dt id="stem.control.UserTrafficAllowed.inbound">
<tt class="descname">inbound</tt><a class="headerlink" href="#stem.control.UserTrafficAllowed.inbound" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.UserTrafficAllowed.outbound">
<tt class="descname">outbound</tt><a class="headerlink" href="#stem.control.UserTrafficAllowed.outbound" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stem.control.CreateHiddenServiceOutput">
<em class="property">class </em><tt class="descclassname">stem.control.</tt><tt class="descname">CreateHiddenServiceOutput</tt><a class="headerlink" href="#stem.control.CreateHiddenServiceOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">tuple</span></tt></p>
<p>CreateHiddenServiceOutput(path, hostname, hostname_for_client, config)</p>
<dl class="attribute">
<dt id="stem.control.CreateHiddenServiceOutput.config">
<tt class="descname">config</tt><a class="headerlink" href="#stem.control.CreateHiddenServiceOutput.config" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.CreateHiddenServiceOutput.hostname">
<tt class="descname">hostname</tt><a class="headerlink" href="#stem.control.CreateHiddenServiceOutput.hostname" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.CreateHiddenServiceOutput.hostname_for_client">
<tt class="descname">hostname_for_client</tt><a class="headerlink" href="#stem.control.CreateHiddenServiceOutput.hostname_for_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="attribute">
<dt id="stem.control.CreateHiddenServiceOutput.path">
<tt class="descname">path</tt><a class="headerlink" href="#stem.control.CreateHiddenServiceOutput.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="stem.control.with_default">
<tt class="descclassname">stem.control.</tt><tt class="descname">with_default</tt><big>(</big><em>yields=False</em><big>)</big><a class="headerlink" href="#stem.control.with_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a decorator to support having a default value. This should be
treated as private.</p>
</dd></dl>

<dl class="class">
<dt id="stem.control.BaseController">
<em class="property">class </em><tt class="descclassname">stem.control.</tt><tt class="descname">BaseController</tt><big>(</big><em>control_socket</em>, <em>is_authenticated=False</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#BaseController"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.BaseController" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Controller for the tor process. This is a minimal base class for other
controllers, providing basic process communication and event listing. Don't
use this directly - subclasses like the <a class="reference internal" href="#stem.control.Controller" title="stem.control.Controller"><tt class="xref py py-class docutils literal"><span class="pre">Controller</span></tt></a>
provide higher level functionality.</p>
<p>It's highly suggested that you don't interact directly with the
<a class="reference internal" href="https://stem.torproject.org/api/socket.html#stem.socket.ControlSocket" title="stem.socket.ControlSocket"><tt class="xref py py-class docutils literal"><span class="pre">ControlSocket</span></tt></a> that we're constructed from - use our
wrapper methods instead.</p>
<p>If the <strong>control_socket</strong> is already authenticated to Tor then the caller
should provide the <strong>is_authenticated</strong> flag. Otherwise, we will treat the
socket as though it hasn't yet been authenticated.</p>
<dl class="method">
<dt id="stem.control.BaseController.msg">
<tt class="descname">msg</tt><big>(</big><em>message</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#BaseController.msg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.BaseController.msg" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a message to our control socket and provides back its reply.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>message</strong> (<em>str</em>) -- message to be formatted and sent to tor</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.ControlMessage" title="stem.response.ControlMessage"><tt class="xref py py-class docutils literal"><span class="pre">ControlMessage</span></tt></a> with the response</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.ProtocolError" title="stem.ProtocolError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ProtocolError</span></tt></a> the content from the socket is
malformed</li>
<li><a class="reference internal" href="#stem.SocketError" title="stem.SocketError"><tt class="xref py py-class docutils literal"><span class="pre">stem.SocketError</span></tt></a> if a problem arises in using the
socket</li>
<li><a class="reference internal" href="#stem.SocketClosed" title="stem.SocketClosed"><tt class="xref py py-class docutils literal"><span class="pre">stem.SocketClosed</span></tt></a> if the socket is shut down</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.BaseController.is_alive">
<tt class="descname">is_alive</tt><big>(</big><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#BaseController.is_alive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.BaseController.is_alive" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if our socket is currently connected. This is a pass-through for our
socket's <a class="reference internal" href="https://stem.torproject.org/api/socket.html#stem.socket.ControlSocket.is_alive" title="stem.socket.ControlSocket.is_alive"><tt class="xref py py-func docutils literal"><span class="pre">is_alive()</span></tt></a> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>bool</strong> that's <strong>True</strong> if our socket is connected and <strong>False</strong> otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.BaseController.is_localhost">
<tt class="descname">is_localhost</tt><big>(</big><big>)</big><a class="headerlink" href="#stem.control.BaseController.is_localhost" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns if the connection is for the local system or not.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.3.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>bool</strong> that's <strong>True</strong> if the connection is for the local host and <strong>False</strong> otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.BaseController.connection_time">
<tt class="descname">connection_time</tt><big>(</big><big>)</big><a class="headerlink" href="#stem.control.BaseController.connection_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the unix timestamp for when our socket was either connected or
disconnected. That is to say, the time we connected if we're currently
connected and the time we disconnected if we're not connected.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.3.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>float</strong> for when we last connected or disconnected, zero if
we've never connected</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.BaseController.is_authenticated">
<tt class="descname">is_authenticated</tt><big>(</big><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#BaseController.is_authenticated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.BaseController.is_authenticated" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if our socket is both connected and authenticated.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>bool</strong> that's <strong>True</strong> if our socket is authenticated to tor
and <strong>False</strong> otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.BaseController.connect">
<tt class="descname">connect</tt><big>(</big><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#BaseController.connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.BaseController.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconnects our control socket. This is a pass-through for our socket's
<a class="reference internal" href="https://stem.torproject.org/api/socket.html#stem.socket.ControlSocket.connect" title="stem.socket.ControlSocket.connect"><tt class="xref py py-func docutils literal"><span class="pre">connect()</span></tt></a> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.SocketError" title="stem.SocketError"><tt class="xref py py-class docutils literal"><span class="pre">stem.SocketError</span></tt></a> if unable to make a socket</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.BaseController.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#BaseController.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.BaseController.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes our socket connection. This is a pass-through for our socket's
<a class="reference internal" href="https://stem.torproject.org/api/socket.html#stem.socket.ControlSocket.close" title="stem.socket.ControlSocket.close"><tt class="xref py py-func docutils literal"><span class="pre">close()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="stem.control.BaseController.get_socket">
<tt class="descname">get_socket</tt><big>(</big><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#BaseController.get_socket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.BaseController.get_socket" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the socket used to speak with the tor process. Communicating with
the socket directly isn't advised since it may confuse this controller.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference internal" href="https://stem.torproject.org/api/socket.html#stem.socket.ControlSocket" title="stem.socket.ControlSocket"><tt class="xref py py-class docutils literal"><span class="pre">ControlSocket</span></tt></a> we're communicating with</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.BaseController.get_latest_heartbeat">
<tt class="descname">get_latest_heartbeat</tt><big>(</big><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#BaseController.get_latest_heartbeat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.BaseController.get_latest_heartbeat" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the unix timestamp for when we last heard from tor. This is zero
if we've never received a message.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">float for the unix timestamp of when we last heard from tor</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.BaseController.add_status_listener">
<tt class="descname">add_status_listener</tt><big>(</big><em>callback</em>, <em>spawn=True</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#BaseController.add_status_listener"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.BaseController.add_status_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Notifies a given function when the state of our socket changes. Functions
are expected to be of the form...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">my_function</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span>
</pre></div>
</div>
<p>The state is a value from the <a class="reference internal" href="#stem.control.State" title="stem.control.State"><tt class="xref py py-data docutils literal"><span class="pre">stem.control.State</span></tt></a> enum. Functions
<strong>must</strong> allow for new values. The timestamp is a float for the unix time
when the change occurred.</p>
<p>This class only provides <strong>State.INIT</strong> and <strong>State.CLOSED</strong> notifications.
Subclasses may provide others.</p>
<p>If spawn is <strong>True</strong> then the callback is notified via a new daemon thread.
If <strong>False</strong> then the notice is under our locks, within the thread where
the change occurred. In general this isn't advised, especially if your
callback could block for a while. If still outstanding these threads are
joined on as part of closing this controller.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>callback</strong> (<em>function</em>) -- function to be notified when our state changes</li>
<li><strong>spawn</strong> (<em>bool</em>) -- calls function via a new thread if <strong>True</strong>, otherwise
it's part of the connect/close method call</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.BaseController.remove_status_listener">
<tt class="descname">remove_status_listener</tt><big>(</big><em>callback</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#BaseController.remove_status_listener"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.BaseController.remove_status_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops listener from being notified of further events.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>callback</strong> (<em>function</em>) -- function to be removed from our listeners</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>bool</strong> that's <strong>True</strong> if we removed one or more occurrences of
the callback, <strong>False</strong> otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stem.control.Controller">
<em class="property">class </em><tt class="descclassname">stem.control.</tt><tt class="descname">Controller</tt><big>(</big><em>control_socket</em>, <em>is_authenticated=False</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stem.control.BaseController" title="stem.control.BaseController"><tt class="xref py py-class docutils literal"><span class="pre">stem.control.BaseController</span></tt></a></p>
<p>Communicates with a control socket. This is built on top of the
BaseController and provides a more user friendly API for library users.</p>
<dl class="staticmethod">
<dt id="stem.control.Controller.from_port">
<em class="property">static </em><tt class="descname">from_port</tt><big>(</big><em>address='127.0.0.1'</em>, <em>port='default'</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.from_port"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.from_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a <a class="reference internal" href="https://stem.torproject.org/api/socket.html#stem.socket.ControlPort" title="stem.socket.ControlPort"><tt class="xref py py-class docutils literal"><span class="pre">ControlPort</span></tt></a> based Controller.</p>
<p>If the <strong>port</strong> is <strong>'default'</strong> then this checks on both 9051 (default
for relays) and 9151 (default for the Tor Browser). This default may change
in the future.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.5.0: </span>Use both port 9051 and 9151 by default.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>address</strong> (<em>str</em>) -- ip address of the controller</li>
<li><strong>port</strong> (<em>int</em>) -- port number of the controller</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="#stem.control.Controller" title="stem.control.Controller"><tt class="xref py py-class docutils literal"><span class="pre">Controller</span></tt></a> attached to the given port</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#stem.SocketError" title="stem.SocketError"><tt class="xref py py-class docutils literal"><span class="pre">stem.SocketError</span></tt></a> if we're unable to establish a connection</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="stem.control.Controller.from_socket_file">
<em class="property">static </em><tt class="descname">from_socket_file</tt><big>(</big><em>path='/var/run/tor/control'</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.from_socket_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.from_socket_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a <a class="reference internal" href="https://stem.torproject.org/api/socket.html#stem.socket.ControlSocketFile" title="stem.socket.ControlSocketFile"><tt class="xref py py-class docutils literal"><span class="pre">ControlSocketFile</span></tt></a> based Controller.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>str</em>) -- path where the control socket is located</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference internal" href="#stem.control.Controller" title="stem.control.Controller"><tt class="xref py py-class docutils literal"><span class="pre">Controller</span></tt></a> attached to the given socket file</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.SocketError" title="stem.SocketError"><tt class="xref py py-class docutils literal"><span class="pre">stem.SocketError</span></tt></a> if we're unable to establish a connection</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.connect">
<tt class="descname">connect</tt><big>(</big><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.connect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="stem.control.Controller.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="stem.control.Controller.authenticate">
<tt class="descname">authenticate</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.authenticate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.authenticate" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience method to authenticate the controller. This is just a
pass-through to <a class="reference internal" href="https://stem.torproject.org/api/connection.html#stem.connection.authenticate" title="stem.connection.authenticate"><tt class="xref py py-func docutils literal"><span class="pre">stem.connection.authenticate()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_info">
<tt class="descname">get_info</tt><big>(</big><em>params</em>, <em>default = UNDEFINED</em>, <em>get_bytes = False</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Queries the control socket for the given GETINFO option. If provided a
default then that's returned if the GETINFO option is undefined or the
call fails for any reason (error response, control port closed, initiated,
etc).</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.1.0: </span>Added the get_bytes argument.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>params</strong> (<em>str,list</em>) -- GETINFO option or options to be queried</li>
<li><strong>default</strong> (<em>object</em>) -- response if the query fails</li>
<li><strong>get_bytes</strong> (<em>bool</em>) -- provides <strong>bytes</strong> values rather than a <strong>str</strong> under python 3.x</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p><p>Response depends upon how we were called as follows...</p>
<ul class="simple">
<li><strong>str</strong> with the response if our param was a <strong>str</strong></li>
<li><strong>dict</strong> with the 'param =&gt; response' mapping if our param was a <strong>list</strong></li>
<li>default if one was provided and our call failed</li>
</ul>
<p></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails and we weren't
provided a default response</li>
<li><a class="reference internal" href="#stem.InvalidArguments" title="stem.InvalidArguments"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidArguments</span></tt></a> if the 'params' requested was
invalid</li>
<li><a class="reference internal" href="#stem.ProtocolError" title="stem.ProtocolError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ProtocolError</span></tt></a> if the geoip database is known to be
unavailable</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_version">
<tt class="descname">get_version</tt><big>(</big><em>default = UNDEFINED</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_version" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience method to get tor version that current controller is
connected to.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>default</strong> (<em>object</em>) -- response if the query fails</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="https://stem.torproject.org/api/version.html#stem.version.Version" title="stem.version.Version"><tt class="xref py py-class docutils literal"><span class="pre">Version</span></tt></a> of the tor instance that we're
connected to</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first simple">
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to query the version</li>
<li><strong>ValueError</strong> if unable to parse the version</li>
</ul>
<p class="last">An exception is only raised if we weren't provided a default response.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_exit_policy">
<tt class="descname">get_exit_policy</tt><big>(</big><em>default = UNDEFINED</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_exit_policy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_exit_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Effective ExitPolicy for our relay. This accounts for
ExitPolicyRejectPrivate and default policies.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>default</strong> (<em>object</em>) -- response if the query fails</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="https://stem.torproject.org/api/exit_policy.html#stem.exit_policy.ExitPolicy" title="stem.exit_policy.ExitPolicy"><tt class="xref py py-class docutils literal"><span class="pre">ExitPolicy</span></tt></a> of the tor instance that
we're connected to</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first simple">
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to query the policy</li>
<li><strong>ValueError</strong> if unable to parse the policy</li>
</ul>
<p class="last">An exception is only raised if we weren't provided a default response.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_ports">
<tt class="descname">get_ports</tt><big>(</big><em>listener_type</em>, <em>default = UNDEFINED</em><big>)</big><a class="headerlink" href="#stem.control.Controller.get_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the local ports where tor is listening for the given type of
connections. This is similar to
<a class="reference internal" href="#stem.control.Controller.get_listeners" title="stem.control.Controller.get_listeners"><tt class="xref py py-func docutils literal"><span class="pre">get_listeners()</span></tt></a>, but doesn't provide
addresses nor include non-local endpoints.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.2.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>listener_type</strong> (<a class="reference internal" href="#stem.control.Listener" title="stem.control.Listener"><em>stem.control.Listener</em></a>) -- connection type being handled
by the ports we return</li>
<li><strong>default</strong> (<em>object</em>) -- response if the query fails</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>list</strong> of <strong>ints</strong> for the local ports where tor handles
connections of the given type</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to determine the ports
and no default was provided</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_listeners">
<tt class="descname">get_listeners</tt><big>(</big><em>listener_type</em>, <em>default = UNDEFINED</em><big>)</big><a class="headerlink" href="#stem.control.Controller.get_listeners" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the addresses and ports where tor is listening for connections of
the given type. This is similar to
<a class="reference internal" href="#stem.control.Controller.get_ports" title="stem.control.Controller.get_ports"><tt class="xref py py-func docutils literal"><span class="pre">get_ports()</span></tt></a> but includes listener addresses
and non-local endpoints.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.2.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>listener_type</strong> (<a class="reference internal" href="#stem.control.Listener" title="stem.control.Listener"><em>stem.control.Listener</em></a>) -- connection type being handled
by the listeners we return</li>
<li><strong>default</strong> (<em>object</em>) -- response if the query fails</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>list</strong> of <strong>(address, port)</strong> tuples for the available
listeners</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to determine the listeners
and no default was provided</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_accounting_stats">
<tt class="descname">get_accounting_stats</tt><big>(</big><em>default = UNDEFINED</em><big>)</big><a class="headerlink" href="#stem.control.Controller.get_accounting_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides stats related to our relaying limitations if AccountingMax was set
in our torrc. This provides a <strong>namedtuple</strong> with the following
attributes...</p>
<blockquote>
<div><ul class="simple">
<li>retrieved (float) - unix timestamp for when this was fetched</li>
<li>status (str) - hibernation status of 'awake', 'soft', or 'hard'</li>
<li>interval_end (datetime)</li>
<li>time_until_reset (int) - seconds until our limits reset</li>
<li>read_bytes (int)</li>
<li>read_bytes_left (int)</li>
<li>read_limit (int)</li>
<li>written_bytes (int)</li>
<li>write_bytes_left (int)</li>
<li>write_limit (int)</li>
</ul>
</div></blockquote>
<p class="versionadded">
<span class="versionmodified">New in version 1.3.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>default</strong> (<em>object</em>) -- response if the query fails</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>namedtuple</strong> with our accounting stats</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to determine the listeners
and no default was provided</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_socks_listeners">
<tt class="descname">get_socks_listeners</tt><big>(</big><em>default='&lt;Undefined_ &gt;'</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_socks_listeners"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_socks_listeners" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the SOCKS <strong>(address, port)</strong> tuples that tor has open.</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 1.2.0: </span>Use <a class="reference internal" href="#stem.control.Controller.get_listeners" title="stem.control.Controller.get_listeners"><tt class="xref py py-func docutils literal"><span class="pre">get_listeners()</span></tt></a> with
<strong>Listener.SOCKS</strong> instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>default</strong> (<em>object</em>) -- response if the query fails</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of <strong>(address, port)</strong> tuples for the available SOCKS
listeners</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to determine the listeners
and no default was provided</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_protocolinfo">
<tt class="descname">get_protocolinfo</tt><big>(</big><em>default = UNDEFINED</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_protocolinfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_protocolinfo" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience method to get the protocol info of the controller.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>default</strong> (<em>object</em>) -- response if the query fails</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.protocolinfo.ProtocolInfoResponse" title="stem.response.protocolinfo.ProtocolInfoResponse"><tt class="xref py py-class docutils literal"><span class="pre">ProtocolInfoResponse</span></tt></a> provided by tor</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first simple">
<li><a class="reference internal" href="#stem.ProtocolError" title="stem.ProtocolError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ProtocolError</span></tt></a> if the PROTOCOLINFO response is
malformed</li>
<li><a class="reference internal" href="#stem.SocketError" title="stem.SocketError"><tt class="xref py py-class docutils literal"><span class="pre">stem.SocketError</span></tt></a> if problems arise in establishing or
using the socket</li>
</ul>
<p class="last">An exception is only raised if we weren't provided a default response.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_user">
<tt class="descname">get_user</tt><big>(</big><em>default = UNDEFINED</em><big>)</big><a class="headerlink" href="#stem.control.Controller.get_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the user tor is running as. This often only works if tor is
running locally. Also, most of its checks are platform dependent, and hence
are not entirely reliable.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.1.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>default</strong> (<em>object</em>) -- response if the query fails</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">str with the username tor is running as</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_pid">
<tt class="descname">get_pid</tt><big>(</big><em>default = UNDEFINED</em><big>)</big><a class="headerlink" href="#stem.control.Controller.get_pid" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the process id of tor. This often only works if tor is running
locally. Also, most of its checks are platform dependent, and hence are not
entirely reliable.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.1.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>default</strong> (<em>object</em>) -- response if the query fails</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>int</strong> for tor's pid</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><strong>ValueError</strong> if unable to determine the pid and no default was
provided</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.is_user_traffic_allowed">
<tt class="descname">is_user_traffic_allowed</tt><big>(</big><big>)</big><a class="headerlink" href="#stem.control.Controller.is_user_traffic_allowed" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if we're likely to service direct user traffic. This essentially
boils down to...</p>
<blockquote>
<div><ul class="simple">
<li>If we're a bridge or guard relay, inbound connections are possibly from
users.</li>
<li>If our exit policy allows traffic then output connections are possibly
from users.</li>
</ul>
</div></blockquote>
<p>Note the word 'likely'. These is a decent guess in practice, but not always
correct. For instance, information about which flags we have are only
fetched periodically.</p>
<p>This method is intended to help you avoid eavesdropping on user traffic.
Monitoring user connections is not only unethical, but likely a violation
of wiretapping laws.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.5.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>namedtuple</strong> with an <strong>inbound</strong> and <strong>outbound</strong> boolean
attribute to indicate if we're likely to have user traffic there</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_microdescriptor">
<tt class="descname">get_microdescriptor</tt><big>(</big><em>relay = None</em>, <em>default = UNDEFINED</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_microdescriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_microdescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the microdescriptor for the relay with the given fingerprint or
nickname. If the relay identifier could be either a fingerprint <em>or</em>
nickname then it's queried as a fingerprint.</p>
<p>If no <strong>relay</strong> is provided then this defaults to ourselves. Remember that
this requires that we've retrieved our own descriptor from remote
authorities so this both won't be available for newly started relays and
may be up to around an hour out of date.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.3.0: </span>Changed so we'd fetch our own descriptor if no 'relay' is provided.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>relay</strong> (<em>str</em>) -- fingerprint or nickname of the relay to be queried</li>
<li><strong>default</strong> (<em>object</em>) -- response if the query fails</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="https://stem.torproject.org/api/descriptor/microdescriptor.html#stem.descriptor.microdescriptor.Microdescriptor" title="stem.descriptor.microdescriptor.Microdescriptor"><tt class="xref py py-class docutils literal"><span class="pre">Microdescriptor</span></tt></a> for the given relay</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first simple">
<li><a class="reference internal" href="#stem.DescriptorUnavailable" title="stem.DescriptorUnavailable"><tt class="xref py py-class docutils literal"><span class="pre">stem.DescriptorUnavailable</span></tt></a> if unable to provide a descriptor
for the given relay</li>
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to query the descriptor</li>
<li><strong>ValueError</strong> if <strong>relay</strong> doesn't conform with the pattern for being
a fingerprint or nickname</li>
</ul>
<p class="last">An exception is only raised if we weren't provided a default response.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_microdescriptors">
<tt class="descname">get_microdescriptors</tt><big>(</big><em>default = UNDEFINED</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_microdescriptors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_microdescriptors" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides an iterator for all of the microdescriptors that tor currently
knows about.</p>
<p><strong>Tor does not expose this information via the control protocol</strong>
(<a class="reference external" href="https://trac.torproject.org/8323">ticket 8323</a>). Until it does this reads the microdescriptors from disk,
and hence won't work remotely or if we lack read permissions.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>default</strong> (<em>list</em>) -- items to provide if the query fails</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">iterates over
<a class="reference internal" href="https://stem.torproject.org/api/descriptor/microdescriptor.html#stem.descriptor.microdescriptor.Microdescriptor" title="stem.descriptor.microdescriptor.Microdescriptor"><tt class="xref py py-class docutils literal"><span class="pre">Microdescriptor</span></tt></a> for relays in
the tor network</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to query tor and no
default was provided</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_server_descriptor">
<tt class="descname">get_server_descriptor</tt><big>(</big><em>relay = None</em>, <em>default = UNDEFINED</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_server_descriptor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_server_descriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the server descriptor for the relay with the given fingerprint or
nickname. If the relay identifier could be either a fingerprint <em>or</em>
nickname then it's queried as a fingerprint.</p>
<p>If no <strong>relay</strong> is provided then this defaults to ourselves. Remember that
this requires that we've retrieved our own descriptor from remote
authorities so this both won't be available for newly started relays and
may be up to around an hour out of date.</p>
<p><strong>As of Tor version 0.2.3.25 relays no longer get server descriptors by
default.</strong> It's advised that you use microdescriptors instead, but if you
really need server descriptors then you can get them by setting
'UseMicrodescriptors 0'.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.3.0: </span>Changed so we'd fetch our own descriptor if no 'relay' is provided.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>relay</strong> (<em>str</em>) -- fingerprint or nickname of the relay to be queried</li>
<li><strong>default</strong> (<em>object</em>) -- response if the query fails</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="https://stem.torproject.org/api/descriptor/server_descriptor.html#stem.descriptor.server_descriptor.RelayDescriptor" title="stem.descriptor.server_descriptor.RelayDescriptor"><tt class="xref py py-class docutils literal"><span class="pre">RelayDescriptor</span></tt></a> for the given relay</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first simple">
<li><a class="reference internal" href="#stem.DescriptorUnavailable" title="stem.DescriptorUnavailable"><tt class="xref py py-class docutils literal"><span class="pre">stem.DescriptorUnavailable</span></tt></a> if unable to provide a descriptor
for the given relay</li>
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to query the descriptor</li>
<li><strong>ValueError</strong> if <strong>relay</strong> doesn't conform with the pattern for being
a fingerprint or nickname</li>
</ul>
<p class="last">An exception is only raised if we weren't provided a default response.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_server_descriptors">
<tt class="descname">get_server_descriptors</tt><big>(</big><em>default = UNDEFINED</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_server_descriptors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_server_descriptors" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides an iterator for all of the server descriptors that tor currently
knows about.</p>
<p><strong>As of Tor version 0.2.3.25 relays no longer get server descriptors by
default.</strong> It's advised that you use microdescriptors instead, but if you
really need server descriptors then you can get them by setting
'UseMicrodescriptors 0'.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>default</strong> (<em>list</em>) -- items to provide if the query fails</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">iterates over
<a class="reference internal" href="https://stem.torproject.org/api/descriptor/server_descriptor.html#stem.descriptor.server_descriptor.RelayDescriptor" title="stem.descriptor.server_descriptor.RelayDescriptor"><tt class="xref py py-class docutils literal"><span class="pre">RelayDescriptor</span></tt></a> for relays in
the tor network</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to query tor and no
default was provided</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_network_status">
<tt class="descname">get_network_status</tt><big>(</big><em>relay = None</em>, <em>default = UNDEFINED</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_network_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_network_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the router status entry for the relay with the given fingerprint
or nickname. If the relay identifier could be either a fingerprint <em>or</em>
nickname then it's queried as a fingerprint.</p>
<p>This provides
<a class="reference internal" href="https://stem.torproject.org/api/descriptor/router_status_entry.html#stem.descriptor.router_status_entry.RouterStatusEntryMicroV3" title="stem.descriptor.router_status_entry.RouterStatusEntryMicroV3"><tt class="xref py py-class docutils literal"><span class="pre">RouterStatusEntryMicroV3</span></tt></a>
instances if tor is using microdescriptors...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">controller</span><span class="o">.</span><span class="n">get_conf</span><span class="p">(</span><span class="s">'UseMicrodescriptors'</span><span class="p">,</span> <span class="s">'0'</span><span class="p">)</span> <span class="o">==</span> <span class="s">'1'</span>
</pre></div>
</div>
<p>... and <a class="reference internal" href="https://stem.torproject.org/api/descriptor/router_status_entry.html#stem.descriptor.router_status_entry.RouterStatusEntryV3" title="stem.descriptor.router_status_entry.RouterStatusEntryV3"><tt class="xref py py-class docutils literal"><span class="pre">RouterStatusEntryV3</span></tt></a>
otherwise.</p>
<p>If no <strong>relay</strong> is provided then this defaults to ourselves. Remember that
this requires that we've retrieved our own descriptor from remote
authorities so this both won't be available for newly started relays and
may be up to around an hour out of date.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.3.0: </span>Changed so we'd fetch our own descriptor if no 'relay' is provided.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>relay</strong> (<em>str</em>) -- fingerprint or nickname of the relay to be queried</li>
<li><strong>default</strong> (<em>object</em>) -- response if the query fails</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="https://stem.torproject.org/api/descriptor/router_status_entry.html#stem.descriptor.router_status_entry.RouterStatusEntry" title="stem.descriptor.router_status_entry.RouterStatusEntry"><tt class="xref py py-class docutils literal"><span class="pre">RouterStatusEntry</span></tt></a>
for the given relay</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first simple">
<li><a class="reference internal" href="#stem.DescriptorUnavailable" title="stem.DescriptorUnavailable"><tt class="xref py py-class docutils literal"><span class="pre">stem.DescriptorUnavailable</span></tt></a> if unable to provide a descriptor
for the given relay</li>
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to query the descriptor</li>
<li><strong>ValueError</strong> if <strong>relay</strong> doesn't conform with the pattern for being
a fingerprint or nickname</li>
</ul>
<p class="last">An exception is only raised if we weren't provided a default response.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_network_statuses">
<tt class="descname">get_network_statuses</tt><big>(</big><em>default = UNDEFINED</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_network_statuses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_network_statuses" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides an iterator for all of the router status entries that tor
currently knows about.</p>
<p>This provides
<a class="reference internal" href="https://stem.torproject.org/api/descriptor/router_status_entry.html#stem.descriptor.router_status_entry.RouterStatusEntryMicroV3" title="stem.descriptor.router_status_entry.RouterStatusEntryMicroV3"><tt class="xref py py-class docutils literal"><span class="pre">RouterStatusEntryMicroV3</span></tt></a>
instances if tor is using microdescriptors...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">controller</span><span class="o">.</span><span class="n">get_conf</span><span class="p">(</span><span class="s">'UseMicrodescriptors'</span><span class="p">,</span> <span class="s">'0'</span><span class="p">)</span> <span class="o">==</span> <span class="s">'1'</span>
</pre></div>
</div>
<p>... and <a class="reference internal" href="https://stem.torproject.org/api/descriptor/router_status_entry.html#stem.descriptor.router_status_entry.RouterStatusEntryV3" title="stem.descriptor.router_status_entry.RouterStatusEntryV3"><tt class="xref py py-class docutils literal"><span class="pre">RouterStatusEntryV3</span></tt></a>
otherwise.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>default</strong> (<em>list</em>) -- items to provide if the query fails</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">iterates over
<a class="reference internal" href="https://stem.torproject.org/api/descriptor/router_status_entry.html#stem.descriptor.router_status_entry.RouterStatusEntry" title="stem.descriptor.router_status_entry.RouterStatusEntry"><tt class="xref py py-class docutils literal"><span class="pre">RouterStatusEntry</span></tt></a> for
relays in the tor network</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to query tor and no
default was provided</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_hidden_service_descriptor">
<tt class="descname">get_hidden_service_descriptor</tt><big>(</big><em>address</em>, <em>default = UNDEFINED</em>, <em>servers = None</em>, <em>await_result = True</em><big>)</big><a class="headerlink" href="#stem.control.Controller.get_hidden_service_descriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the descriptor for a hidden service. The <strong>address</strong> is the
'.onion' address of the hidden service (for instance 3g2upl4pq6kufc4m.onion
for DuckDuckGo).</p>
<p>If <strong>await_result</strong> is <strong>True</strong> then this blocks until we either receive
the descriptor or the request fails. If <strong>False</strong> this returns right away.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.4.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>address</strong> (<em>str</em>) -- address of the hidden service descriptor, the '.onion' suffix is optional</li>
<li><strong>default</strong> (<em>object</em>) -- response if the query fails</li>
<li><strong>servers</strong> (<em>list</em>) -- requrest the descriptor from these specific servers</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="https://stem.torproject.org/api/descriptor/hidden_service_descriptor.html#stem.descriptor.hidden_service_descriptor.HiddenServiceDescriptor" title="stem.descriptor.hidden_service_descriptor.HiddenServiceDescriptor"><tt class="xref py py-class docutils literal"><span class="pre">HiddenServiceDescriptor</span></tt></a>
for the given service if <strong>await_result</strong> is <strong>True</strong>, or <strong>None</strong> otherwise</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first simple">
<li><a class="reference internal" href="#stem.DescriptorUnavailable" title="stem.DescriptorUnavailable"><tt class="xref py py-class docutils literal"><span class="pre">stem.DescriptorUnavailable</span></tt></a> if <strong>await_result</strong> is <strong>True</strong> and
unable to provide a descriptor for the given service</li>
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if unable to query the descriptor</li>
<li><strong>ValueError</strong> if <strong>address</strong> doesn't conform with the pattern of a
hidden service address</li>
</ul>
<p class="last">An exception is only raised if we weren't provided a default response.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_conf">
<tt class="descname">get_conf</tt><big>(</big><em>param</em>, <em>default='&lt;Undefined_ &gt;'</em>, <em>multiple=False</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_conf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Queries the current value for a configuration option. Some configuration
options (like the ExitPolicy) can have multiple values. This provides a
<strong>list</strong> with all of the values if <strong>multiple</strong> is <strong>True</strong>. Otherwise this
will be a <strong>str</strong> with the first value.</p>
<p>If provided with a <strong>default</strong> then that is provided if the configuration
option was unset or the query fails (invalid configuration option, error
response, control port closed, initiated, etc).</p>
<p>If the configuration value is unset and no <strong>default</strong> was given then this
provides <strong>None</strong> if <strong>multiple</strong> was <strong>False</strong> and an empty list if it was
<strong>True</strong>.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>param</strong> (<em>str</em>) -- configuration option to be queried</li>
<li><strong>default</strong> (<em>object</em>) -- response if the option is unset or the query fails</li>
<li><strong>multiple</strong> (<em>bool</em>) -- if <strong>True</strong> then provides a list with all of the
present values (this is an empty list if the config option is unset)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p><p>Response depends upon how we were called as follows...</p>
<ul class="simple">
<li><strong>str</strong> with the configuration value if <strong>multiple</strong> was <strong>False</strong>,
<strong>None</strong> if it was unset</li>
<li><strong>list</strong> with the response strings if multiple was <strong>True</strong></li>
<li>default if one was provided and the configuration option was either
unset or our call failed</li>
</ul>
<p></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails and we weren't
provided a default response</li>
<li><a class="reference internal" href="#stem.InvalidArguments" title="stem.InvalidArguments"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidArguments</span></tt></a> if the configuration option
requested was invalid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_conf_map">
<tt class="descname">get_conf_map</tt><big>(</big><em>params</em>, <em>default='&lt;Undefined_ &gt;'</em>, <em>multiple=True</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_conf_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_conf_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="#stem.control.Controller.get_conf" title="stem.control.Controller.get_conf"><tt class="xref py py-func docutils literal"><span class="pre">get_conf()</span></tt></a> but queries multiple
configuration options, providing back a mapping of those options to their
values.</p>
<p>There are three use cases for GETCONF:</p>
<blockquote>
<div><ol class="arabic simple">
<li>a single value is provided (e.g. <strong>ControlPort</strong>)</li>
<li>multiple values are provided for the option (e.g. <strong>ExitPolicy</strong>)</li>
<li>a set of options that weren't necessarily requested are returned (for
instance querying <strong>HiddenServiceOptions</strong> gives <strong>HiddenServiceDir</strong>,
<strong>HiddenServicePort</strong>, etc)</li>
</ol>
</div></blockquote>
<p>The vast majority of the options fall into the first two categories, in
which case calling <a class="reference internal" href="#stem.control.Controller.get_conf" title="stem.control.Controller.get_conf"><tt class="xref py py-func docutils literal"><span class="pre">get_conf()</span></tt></a> is sufficient.
However, for batch queries or the special options that give a set of values
this provides back the full response. As of tor version 0.2.1.25
<strong>HiddenServiceOptions</strong> was the only option that falls into the third
category.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>params</strong> (<em>str,list</em>) -- configuration option(s) to be queried</li>
<li><strong>default</strong> (<em>object</em>) -- value for the mappings if the configuration option
is either undefined or the query fails</li>
<li><strong>multiple</strong> (<em>bool</em>) -- if <strong>True</strong> then the values provided are lists with
all of the present values</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p><p><strong>dict</strong> of the 'config key =&gt; value' mappings. The value is a...</p>
<ul class="simple">
<li><strong>str</strong> if <strong>multiple</strong> is <strong>False</strong>, <strong>None</strong> if the configuration
option is unset</li>
<li><strong>list</strong> if <strong>multiple</strong> is <strong>True</strong></li>
<li>the <strong>default</strong> if it was set and the value was either undefined or our
lookup failed</li>
</ul>
<p></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails and we weren't provided
a default response</li>
<li><a class="reference internal" href="#stem.InvalidArguments" title="stem.InvalidArguments"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidArguments</span></tt></a> if the configuration option requested
was invalid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.set_conf">
<tt class="descname">set_conf</tt><big>(</big><em>param</em>, <em>value</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.set_conf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.set_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the value of a tor configuration option. Our value can be any of
the following...</p>
<ul class="simple">
<li>a string to set a single value</li>
<li>a list of strings to set a series of values (for instance the ExitPolicy)</li>
<li>None to either set the value to 0/NULL</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>param</strong> (<em>str</em>) -- configuration option to be set</li>
<li><strong>value</strong> (<em>str,list</em>) -- value to set the parameter to</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</li>
<li><a class="reference internal" href="#stem.InvalidArguments" title="stem.InvalidArguments"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidArguments</span></tt></a> if configuration options
requested was invalid</li>
<li><a class="reference internal" href="#stem.InvalidRequest" title="stem.InvalidRequest"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidRequest</span></tt></a> if the configuration setting is
impossible or if there's a syntax error in the configuration values</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.reset_conf">
<tt class="descname">reset_conf</tt><big>(</big><em>*params</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.reset_conf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.reset_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Reverts one or more parameters to their default values.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>params</strong> (<em>str</em>) -- configuration option to be reset</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</li>
<li><a class="reference internal" href="#stem.InvalidArguments" title="stem.InvalidArguments"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidArguments</span></tt></a> if configuration options requested was invalid</li>
<li><a class="reference internal" href="#stem.InvalidRequest" title="stem.InvalidRequest"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidRequest</span></tt></a> if the configuration setting is
impossible or if there's a syntax error in the configuration values</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.set_options">
<tt class="descname">set_options</tt><big>(</big><em>params</em>, <em>reset=False</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.set_options"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.set_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes multiple tor configuration options via either a SETCONF or
RESETCONF query. Both behave identically unless our value is None, in which
case SETCONF sets the value to 0 or NULL, and RESETCONF returns it to its
default value. This accepts str, list, or None values in a similar fashion
to <a class="reference internal" href="#stem.control.Controller.set_conf" title="stem.control.Controller.set_conf"><tt class="xref py py-func docutils literal"><span class="pre">set_conf()</span></tt></a>. For example...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">my_controller</span><span class="o">.</span><span class="n">set_options</span><span class="p">({</span>
  <span class="s">'Nickname'</span><span class="p">:</span> <span class="s">'caerSidi'</span><span class="p">,</span>
  <span class="s">'ExitPolicy'</span><span class="p">:</span> <span class="p">[</span><span class="s">'accept *:80'</span><span class="p">,</span> <span class="s">'accept *:443'</span><span class="p">,</span> <span class="s">'reject *:*'</span><span class="p">],</span>
  <span class="s">'ContactInfo'</span><span class="p">:</span> <span class="s">'caerSidi-exit@someplace.com'</span><span class="p">,</span>
  <span class="s">'Log'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">})</span>
</pre></div>
</div>
<p>The params can optionally be a list of key/value tuples, though the only
reason this type of argument would be useful is for hidden service
configuration (those options are order dependent).</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>params</strong> (<em>dict,list</em>) -- mapping of configuration options to the values
we're setting it to</li>
<li><strong>reset</strong> (<em>bool</em>) -- issues a RESETCONF, returning <strong>None</strong> values to their
defaults if <strong>True</strong></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</li>
<li><a class="reference internal" href="#stem.InvalidArguments" title="stem.InvalidArguments"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidArguments</span></tt></a> if configuration options
requested was invalid</li>
<li><a class="reference internal" href="#stem.InvalidRequest" title="stem.InvalidRequest"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidRequest</span></tt></a> if the configuration setting is
impossible or if there's a syntax error in the configuration values</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_hidden_service_conf">
<tt class="descname">get_hidden_service_conf</tt><big>(</big><em>default = UNDEFINED</em><big>)</big><a class="headerlink" href="#stem.control.Controller.get_hidden_service_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>This provides a mapping of hidden service directories to their
attribute's key/value pairs. All hidden services are assured to have a
'HiddenServicePort', but other entries may or may not exist.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
  <span class="s">"/var/lib/tor/hidden_service_empty/"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"HiddenServicePort"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="s">"/var/lib/tor/hidden_service_with_two_ports/"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"HiddenServiceAuthorizeClient"</span><span class="p">:</span> <span class="s">"stealth a, b"</span><span class="p">,</span>
    <span class="s">"HiddenServicePort"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">(</span><span class="mi">8020</span><span class="p">,</span> <span class="s">"127.0.0.1"</span><span class="p">,</span> <span class="mi">8020</span><span class="p">),</span>  <span class="c"># the ports order is kept</span>
      <span class="p">(</span><span class="mi">8021</span><span class="p">,</span> <span class="s">"127.0.0.1"</span><span class="p">,</span> <span class="mi">8021</span><span class="p">)</span>
    <span class="p">],</span>
    <span class="s">"HiddenServiceVersion"</span><span class="p">:</span> <span class="s">"2"</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 1.3.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>default</strong> (<em>object</em>) -- response if the query fails</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>dict</strong> with the hidden service configuration</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails and we weren't
provided a default response</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.set_hidden_service_conf">
<tt class="descname">set_hidden_service_conf</tt><big>(</big><em>conf</em><big>)</big><a class="headerlink" href="#stem.control.Controller.set_hidden_service_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Update all the configured hidden services from a dictionary having
the same format as
<a class="reference internal" href="#stem.control.Controller.get_hidden_service_conf" title="stem.control.Controller.get_hidden_service_conf"><tt class="xref py py-func docutils literal"><span class="pre">get_hidden_service_conf()</span></tt></a>.</p>
<p>For convenience the HiddenServicePort entries can be an integer, string, or
tuple. If an <strong>int</strong> then we treat it as just a port. If a <strong>str</strong> we pass
that directly as the HiddenServicePort. And finally, if a <strong>tuple</strong> then
it's expected to be the <strong>(port, target_address, target_port)</strong> as provided
by <a class="reference internal" href="#stem.control.Controller.get_hidden_service_conf" title="stem.control.Controller.get_hidden_service_conf"><tt class="xref py py-func docutils literal"><span class="pre">get_hidden_service_conf()</span></tt></a>.</p>
<p>This is to say the following three are equivalent...</p>
<div class="highlight-python"><pre>"HiddenServicePort": [
  80,
  '80 127.0.0.1:80',
  (80, '127.0.0.1', 80),
]</pre>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 1.3.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>conf</strong> (<em>dict</em>) -- configuration dictionary</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</li>
<li><a class="reference internal" href="#stem.InvalidArguments" title="stem.InvalidArguments"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidArguments</span></tt></a> if configuration options
requested was invalid</li>
<li><a class="reference internal" href="#stem.InvalidRequest" title="stem.InvalidRequest"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidRequest</span></tt></a> if the configuration setting is
impossible or if there's a syntax error in the configuration values</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.create_hidden_service">
<tt class="descname">create_hidden_service</tt><big>(</big><em>path</em>, <em>port</em>, <em>target_address=None</em>, <em>target_port=None</em>, <em>auth_type=None</em>, <em>client_names=None</em><big>)</big><a class="headerlink" href="#stem.control.Controller.create_hidden_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new hidden service. If the directory is already present, a
new port is added. This provides a <strong>namedtuple</strong> of the following...</p>
<blockquote>
<div><ul class="simple">
<li>path (str) - hidden service directory</li>
<li>hostname (str) - Content of the hostname file, if no <strong>client_names</strong>
are provided this is the onion address of the service. This is only
retrieved if we can read the hidden service directory.</li>
<li>hostname_for_client (dict) - mapping of client names to their onion
address, this is only set if the <strong>client_names</strong> was provided and we
can read the hidden service directory</li>
<li>config (dict) - tor's new hidden service configuration</li>
</ul>
</div></blockquote>
<p>Our <em>.onion address is fetched by reading the hidden service directory.
However, this directory is only readable by the tor user, so if unavailable
the **hostname*</em> will be <strong>None</strong>.</p>
<p><strong>As of Tor 0.2.7.1 there's two ways for creating hidden services. This is
no longer the recommended method.</strong> Rather, try using
<a class="reference internal" href="#stem.control.Controller.create_ephemeral_hidden_service" title="stem.control.Controller.create_ephemeral_hidden_service"><tt class="xref py py-func docutils literal"><span class="pre">create_ephemeral_hidden_service()</span></tt></a> instead.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.3.0.</span></p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 1.4.0: </span>Added the auth_type and client_names arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<em>str</em>) -- path for the hidden service's data directory</li>
<li><strong>port</strong> (<em>int</em>) -- hidden service port</li>
<li><strong>target_address</strong> (<em>str</em>) -- address of the service, by default 127.0.0.1</li>
<li><strong>target_port</strong> (<em>int</em>) -- port of the service, by default this is the same as
<strong>port</strong></li>
<li><strong>auth_type</strong> (<em>str</em>) -- authentication type: basic, stealth or None to disable auth</li>
<li><strong>client_names</strong> (<em>list</em>) -- client names (1-16 characters "A-Za-z0-9+-_")</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>CreateHiddenServiceOutput</strong> if we create or update a hidden service, <strong>None</strong> otherwise</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.remove_hidden_service">
<tt class="descname">remove_hidden_service</tt><big>(</big><em>path</em>, <em>port=None</em><big>)</big><a class="headerlink" href="#stem.control.Controller.remove_hidden_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Discontinues a given hidden service.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.3.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<em>str</em>) -- path for the hidden service's data directory</li>
<li><strong>port</strong> (<em>int</em>) -- hidden service port</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>True</strong> if the hidden service is discontinued, <strong>False</strong> if it
wasn't running in the first place</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.list_ephemeral_hidden_services">
<tt class="descname">list_ephemeral_hidden_services</tt><big>(</big><em>default = UNDEFINED</em>, <em>our_services = True</em>, <em>detached = False</em><big>)</big><a class="headerlink" href="#stem.control.Controller.list_ephemeral_hidden_services" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists hidden service addresses created by
<a class="reference internal" href="#stem.control.Controller.create_ephemeral_hidden_service" title="stem.control.Controller.create_ephemeral_hidden_service"><tt class="xref py py-func docutils literal"><span class="pre">create_ephemeral_hidden_service()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.4.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>default</strong> (<em>object</em>) -- response if the query fails</li>
<li><strong>our_services</strong> (<em>bool</em>) -- include services created with this controller
that weren't flagged as 'detached'</li>
<li><strong>detached</strong> (<em>bool</em>) -- include services whos contiuation isn't tied to a
controller</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>list</strong> of hidden service addresses without their '.onion'
suffix</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails and we weren't
provided a default response</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.create_ephemeral_hidden_service">
<tt class="descname">create_ephemeral_hidden_service</tt><big>(</big><em>ports</em>, <em>key_type='NEW'</em>, <em>key_content='BEST'</em>, <em>discard_key=False</em>, <em>detached=False</em>, <em>await_publication=False</em><big>)</big><a class="headerlink" href="#stem.control.Controller.create_ephemeral_hidden_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new hidden service. Unlike
<a class="reference internal" href="#stem.control.Controller.create_hidden_service" title="stem.control.Controller.create_hidden_service"><tt class="xref py py-func docutils literal"><span class="pre">create_hidden_service()</span></tt></a> this style of
hidden service doesn't touch disk, carrying with it a lot of advantages.
This is the suggested method for making hidden services.</p>
<p>Our <strong>ports</strong> argument can be a single port...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">create_ephemeral_hidden_service</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>... list of ports the service is available on...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">create_ephemeral_hidden_service</span><span class="p">([</span><span class="mi">80</span><span class="p">,</span> <span class="mi">443</span><span class="p">])</span>
</pre></div>
</div>
<p>... or a mapping of hidden service ports to their targets...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">create_ephemeral_hidden_service</span><span class="p">({</span><span class="mi">80</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">443</span><span class="p">:</span> <span class="s">'173.194.33.133:443'</span><span class="p">})</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 1.4.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ports</strong> (<em>int,list,dict</em>) -- hidden service port(s) or mapping of hidden
service ports to their targets</li>
<li><strong>key_type</strong> (<em>str</em>) -- type of key being provided, generates a new key if
'NEW' (options are: <strong>NEW</strong> and <strong>RSA1024</strong>)</li>
<li><strong>key_content</strong> (<em>str</em>) -- key for the service to use or type of key to be
generated (options when <strong>key_type</strong> is <strong>NEW</strong> are <strong>BEST</strong> and
<strong>RSA1024</strong>)</li>
<li><strong>discard_key</strong> (<em>bool</em>) -- avoid providing the key back in our response</li>
<li><strong>detached</strong> (<em>bool</em>) -- continue this hidden service even after this control
connection is closed if <strong>True</strong></li>
<li><strong>await_publication</strong> (<em>bool</em>) -- blocks until our descriptor is successfully
published if <strong>True</strong></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.add_onion.AddOnionResponse" title="stem.response.add_onion.AddOnionResponse"><tt class="xref py py-class docutils literal"><span class="pre">AddOnionResponse</span></tt></a> with the response</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.remove_ephemeral_hidden_service">
<tt class="descname">remove_ephemeral_hidden_service</tt><big>(</big><em>service_id</em><big>)</big><a class="headerlink" href="#stem.control.Controller.remove_ephemeral_hidden_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Discontinues a given hidden service that was created with
<a class="reference internal" href="#stem.control.Controller.create_ephemeral_hidden_service" title="stem.control.Controller.create_ephemeral_hidden_service"><tt class="xref py py-func docutils literal"><span class="pre">create_ephemeral_hidden_service()</span></tt></a>.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.4.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>service_id</strong> (<em>str</em>) -- hidden service address without the '.onion' suffix</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>True</strong> if the hidden service is discontinued, <strong>False</strong> if it
wasn't running in the first place</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.add_event_listener">
<tt class="descname">add_event_listener</tt><big>(</big><em>listener</em>, <em>*events</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.add_event_listener"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.add_event_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Directs further tor controller events to a given function. The function is
expected to take a single argument, which is a
<a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.Event" title="stem.response.events.Event"><tt class="xref py py-class docutils literal"><span class="pre">Event</span></tt></a> subclass. For instance the following
would print the bytes sent and received by tor over five seconds...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">stem.control</span> <span class="kn">import</span> <span class="n">Controller</span><span class="p">,</span> <span class="n">EventType</span>

<span class="k">def</span> <span class="nf">print_bw</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
  <span class="k">print</span><span class="p">(</span><span class="s">'sent: </span><span class="si">%i</span><span class="s">, received: </span><span class="si">%i</span><span class="s">'</span> <span class="o">%</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">written</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">read</span><span class="p">))</span>

<span class="k">with</span> <span class="n">Controller</span><span class="o">.</span><span class="n">from_port</span><span class="p">(</span><span class="n">port</span> <span class="o">=</span> <span class="mi">9051</span><span class="p">)</span> <span class="k">as</span> <span class="n">controller</span><span class="p">:</span>
  <span class="n">controller</span><span class="o">.</span><span class="n">authenticate</span><span class="p">()</span>
  <span class="n">controller</span><span class="o">.</span><span class="n">add_event_listener</span><span class="p">(</span><span class="n">print_bw</span><span class="p">,</span> <span class="n">EventType</span><span class="o">.</span><span class="n">BW</span><span class="p">)</span>
  <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>If a new control connection is initialized then this listener will be
reattached.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>listener</strong> (<em>functor</em>) -- function to be called when an event is received</li>
<li><strong>events</strong> (<a class="reference internal" href="#stem.control.EventType" title="stem.control.EventType"><em>stem.control.EventType</em></a>) -- event types to be listened for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#stem.ProtocolError" title="stem.ProtocolError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ProtocolError</span></tt></a> if unable to set the events</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.remove_event_listener">
<tt class="descname">remove_event_listener</tt><big>(</big><em>listener</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.remove_event_listener"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.remove_event_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops a listener from being notified of further tor events.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>listener</strong> (<em>stem.control.EventListener</em>) -- listener to be removed</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.ProtocolError" title="stem.ProtocolError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ProtocolError</span></tt></a> if unable to set the events</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.is_caching_enabled">
<tt class="descname">is_caching_enabled</tt><big>(</big><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.is_caching_enabled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.is_caching_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>True</strong> if caching has been enabled, <strong>False</strong> otherwise.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">bool to indicate if caching is enabled</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.set_caching">
<tt class="descname">set_caching</tt><big>(</big><em>enabled</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.set_caching"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.set_caching" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables or disables caching of information retrieved from tor.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>enabled</strong> (<em>bool</em>) -- <strong>True</strong> to enable caching, <strong>False</strong> to disable it</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.clear_cache">
<tt class="descname">clear_cache</tt><big>(</big><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.clear_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.clear_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Drops any cached results.</p>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.load_conf">
<tt class="descname">load_conf</tt><big>(</big><em>configtext</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.load_conf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.load_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the configuration text to Tor and loads it as if it has been read from
the torrc.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>configtext</strong> (<em>str</em>) -- the configuration text</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.save_conf">
<tt class="descname">save_conf</tt><big>(</big><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.save_conf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.save_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the current configuration options into the active torrc file.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</li>
<li><a class="reference internal" href="#stem.OperationFailed" title="stem.OperationFailed"><tt class="xref py py-class docutils literal"><span class="pre">stem.OperationFailed</span></tt></a> if the client is unable to save
the configuration file</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.is_feature_enabled">
<tt class="descname">is_feature_enabled</tt><big>(</big><em>feature</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.is_feature_enabled"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.is_feature_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a control connection feature is enabled. These features can be
enabled using <a class="reference internal" href="#stem.control.Controller.enable_feature" title="stem.control.Controller.enable_feature"><tt class="xref py py-func docutils literal"><span class="pre">enable_feature()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>feature</strong> (<em>str</em>) -- feature to be checked</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>True</strong> if feature is enabled, <strong>False</strong> otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.enable_feature">
<tt class="descname">enable_feature</tt><big>(</big><em>features</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.enable_feature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.enable_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables features that are disabled by default to maintain backward
compatibility. Once enabled, a feature cannot be disabled and a new
control connection must be opened to get a connection with the feature
disabled. Feature names are case-insensitive.</p>
<p>The following features are currently accepted:</p>
<blockquote>
<div><ul class="simple">
<li>EXTENDED_EVENTS - Requests the extended event syntax</li>
<li>VERBOSE_NAMES - Replaces ServerID with LongName in events and GETINFO results</li>
</ul>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>features</strong> (<em>str,list</em>) -- a single feature or a list of features to be enabled</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</li>
<li><a class="reference internal" href="#stem.InvalidArguments" title="stem.InvalidArguments"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidArguments</span></tt></a> if features passed were invalid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_circuit">
<tt class="descname">get_circuit</tt><big>(</big><em>circuit_id</em>, <em>default = UNDEFINED</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_circuit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_circuit" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a circuit currently available from tor.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>circuit_id</strong> (<em>int</em>) -- circuit to be fetched</li>
<li><strong>default</strong> (<em>object</em>) -- response if the query fails</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.CircuitEvent" title="stem.response.events.CircuitEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.CircuitEvent</span></tt></a> for the given circuit</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first simple">
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</li>
<li><strong>ValueError</strong> if the circuit doesn't exist</li>
</ul>
<p class="last">An exception is only raised if we weren't provided a default response.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_circuits">
<tt class="descname">get_circuits</tt><big>(</big><em>default = UNDEFINED</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_circuits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_circuits" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides tor's currently available circuits.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>default</strong> (<em>object</em>) -- response if the query fails</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>list</strong> of <a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.CircuitEvent" title="stem.response.events.CircuitEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.CircuitEvent</span></tt></a> for our circuits</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails and no default was provided</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.new_circuit">
<tt class="descname">new_circuit</tt><big>(</big><em>path=None</em>, <em>purpose='general'</em>, <em>await_build=False</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.new_circuit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.new_circuit" title="Permalink to this definition">¶</a></dt>
<dd><p>Requests a new circuit. If the path isn't provided, one is automatically
selected.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<em>list,str</em>) -- one or more relays to make a circuit through</li>
<li><strong>purpose</strong> (<em>str</em>) -- 'general' or 'controller'</li>
<li><strong>await_build</strong> (<em>bool</em>) -- blocks until the circuit is built if <strong>True</strong></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">str of the circuit id of the newly created circuit</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.extend_circuit">
<tt class="descname">extend_circuit</tt><big>(</big><em>circuit_id='0'</em>, <em>path=None</em>, <em>purpose='general'</em>, <em>await_build=False</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.extend_circuit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.extend_circuit" title="Permalink to this definition">¶</a></dt>
<dd><p>Either requests the creation of a new circuit or extends an existing one.</p>
<p>When called with a circuit value of zero (the default) a new circuit is
created, and when non-zero the circuit with that id is extended. If the
path isn't provided, one is automatically selected.</p>
<p>A python interpreter session used to create circuits could look like this...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">controller</span><span class="o">.</span><span class="n">extend_circuit</span><span class="p">(</span><span class="s">'0'</span><span class="p">,</span> <span class="p">[</span><span class="s">'718BCEA286B531757ACAFF93AE04910EA73DE617'</span><span class="p">,</span> <span class="s">'30BAB8EE7606CBD12F3CC269AE976E0153E7A58D'</span><span class="p">,</span> <span class="s">'2765D8A8C4BBA3F89585A9FFE0E8575615880BEB'</span><span class="p">])</span>
<span class="go">19</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">controller</span><span class="o">.</span><span class="n">extend_circuit</span><span class="p">(</span><span class="s">'0'</span><span class="p">)</span>
<span class="go">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">controller</span><span class="o">.</span><span class="n">get_info</span><span class="p">(</span><span class="s">'circuit-status'</span><span class="p">))</span>
<span class="go">20 EXTENDED $718BCEA286B531757ACAFF93AE04910EA73DE617=KsmoinOK,$649F2D0ACF418F7CFC6539AB2257EB2D5297BAFA=Eskimo BUILD_FLAGS=NEED_CAPACITY PURPOSE=GENERAL TIME_CREATED=2012-12-06T13:51:11.433755</span>
<span class="go">19 BUILT $718BCEA286B531757ACAFF93AE04910EA73DE617=KsmoinOK,$30BAB8EE7606CBD12F3CC269AE976E0153E7A58D=Pascal1,$2765D8A8C4BBA3F89585A9FFE0E8575615880BEB=Anthracite PURPOSE=GENERAL TIME_CREATED=2012-12-06T13:50:56.969938</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>circuit_id</strong> (<em>str</em>) -- id of a circuit to be extended</li>
<li><strong>path</strong> (<em>list,str</em>) -- one or more relays to make a circuit through, this is
required if the circuit id is non-zero</li>
<li><strong>purpose</strong> (<em>str</em>) -- 'general' or 'controller'</li>
<li><strong>await_build</strong> (<em>bool</em>) -- blocks until the circuit is built if <strong>True</strong></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">str of the circuit id of the created or extended circuit</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.InvalidRequest" title="stem.InvalidRequest"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidRequest</span></tt></a> if one of the parameters were invalid</li>
<li><a class="reference internal" href="#stem.CircuitExtensionFailed" title="stem.CircuitExtensionFailed"><tt class="xref py py-class docutils literal"><span class="pre">stem.CircuitExtensionFailed</span></tt></a> if we were waiting for the circuit
to build but it failed</li>
<li><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.repurpose_circuit">
<tt class="descname">repurpose_circuit</tt><big>(</big><em>circuit_id</em>, <em>purpose</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.repurpose_circuit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.repurpose_circuit" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Changes a circuit's purpose. Currently, two purposes are recognized...</dt>
<dd><ul class="first last simple">
<li>general</li>
<li>controller</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>circuit_id</strong> (<em>str</em>) -- id of the circuit whose purpose is to be changed</li>
<li><strong>purpose</strong> (<em>str</em>) -- purpose (either 'general' or 'controller')</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#stem.InvalidArguments" title="stem.InvalidArguments"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidArguments</span></tt></a> if the circuit doesn't exist or if the purpose was invalid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.close_circuit">
<tt class="descname">close_circuit</tt><big>(</big><em>circuit_id</em>, <em>flag=''</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.close_circuit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.close_circuit" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes the specified circuit.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>circuit_id</strong> (<em>str</em>) -- id of the circuit to be closed</li>
<li><strong>flag</strong> (<em>str</em>) -- optional value to modify closing, the only flag available
is 'IfUnused' which will not close the circuit unless it is unused</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><p class="first"><a class="reference internal" href="#stem.InvalidArguments" title="stem.InvalidArguments"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidArguments</span></tt></a> if the circuit is unknown</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#stem.InvalidRequest" title="stem.InvalidRequest"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidRequest</span></tt></a> if not enough information is provided</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_streams">
<tt class="descname">get_streams</tt><big>(</big><em>default = UNDEFINED</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.get_streams"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.get_streams" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the list of streams tor is currently handling.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>default</strong> (<em>object</em>) -- response if the query fails</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of <a class="reference internal" href="https://stem.torproject.org/api/response.html#stem.response.events.StreamEvent" title="stem.response.events.StreamEvent"><tt class="xref py py-class docutils literal"><span class="pre">stem.response.events.StreamEvent</span></tt></a> objects</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails and no default was
provided</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.attach_stream">
<tt class="descname">attach_stream</tt><big>(</big><em>stream_id</em>, <em>circuit_id</em>, <em>exiting_hop=None</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.attach_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.attach_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Attaches a stream to a circuit.</p>
<p>Note: Tor attaches streams to circuits automatically unless the
__LeaveStreamsUnattached configuration variable is set to '1'</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>stream_id</strong> (<em>str</em>) -- id of the stream that must be attached</li>
<li><strong>circuit_id</strong> (<em>str</em>) -- id of the circuit to which it must be attached</li>
<li><strong>exiting_hop</strong> (<em>int</em>) -- hop in the circuit where traffic should exit</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.InvalidRequest" title="stem.InvalidRequest"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidRequest</span></tt></a> if the stream or circuit id were unrecognized</li>
<li><a class="reference internal" href="#stem.UnsatisfiableRequest" title="stem.UnsatisfiableRequest"><tt class="xref py py-class docutils literal"><span class="pre">stem.UnsatisfiableRequest</span></tt></a> if the stream isn't in a state where it can be attached</li>
<li><a class="reference internal" href="#stem.OperationFailed" title="stem.OperationFailed"><tt class="xref py py-class docutils literal"><span class="pre">stem.OperationFailed</span></tt></a> if the stream couldn't be attached for any other reason</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.close_stream">
<tt class="descname">close_stream</tt><big>(</big><em>stream_id</em>, <em>reason='MISC'</em>, <em>flag=''</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.close_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.close_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes the specified stream.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>stream_id</strong> (<em>str</em>) -- id of the stream to be closed</li>
<li><strong>reason</strong> (<a class="reference internal" href="#stem.RelayEndReason" title="stem.RelayEndReason"><em>stem.RelayEndReason</em></a>) -- reason the stream is closing</li>
<li><strong>flag</strong> (<em>str</em>) -- not currently used</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="#stem.InvalidArguments" title="stem.InvalidArguments"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidArguments</span></tt></a> if the stream or reason are not recognized</li>
<li><a class="reference internal" href="#stem.InvalidRequest" title="stem.InvalidRequest"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidRequest</span></tt></a> if the stream and/or reason are missing</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.signal">
<tt class="descname">signal</tt><big>(</big><em>signal</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.signal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a signal to the Tor client.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>signal</strong> (<a class="reference internal" href="#stem.Signal" title="stem.Signal"><em>stem.Signal</em></a>) -- type of signal to be sent</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.InvalidArguments" title="stem.InvalidArguments"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidArguments</span></tt></a> if signal provided wasn't recognized</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.is_newnym_available">
<tt class="descname">is_newnym_available</tt><big>(</big><big>)</big><a class="headerlink" href="#stem.control.Controller.is_newnym_available" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates if tor would currently accept a NEWNYM signal. This can only
account for signals sent via this controller.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.2.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>True</strong> if tor would currently accept a NEWNYM signal, <strong>False</strong>
otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_newnym_wait">
<tt class="descname">get_newnym_wait</tt><big>(</big><big>)</big><a class="headerlink" href="#stem.control.Controller.get_newnym_wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the number of seconds until a NEWNYM signal would be respected.
This can only account for signals sent via this controller.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.2.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>float</strong> for the number of seconds until tor would respect
another NEWNYM signal</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.get_effective_rate">
<tt class="descname">get_effective_rate</tt><big>(</big><em>default = UNDEFINED</em>, <em>burst = False</em><big>)</big><a class="headerlink" href="#stem.control.Controller.get_effective_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides the maximum rate this relay is configured to relay in bytes per
second. This is based on multiple torrc parameters if they're set...</p>
<ul class="simple">
<li>Effective Rate = min(BandwidthRate, RelayBandwidthRate, MaxAdvertisedBandwidth)</li>
<li>Effective Burst = min(BandwidthBurst, RelayBandwidthBurst)</li>
</ul>
<p class="versionadded">
<span class="versionmodified">New in version 1.3.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>default</strong> (<em>object</em>) -- response if the query fails</li>
<li><strong>burst</strong> (<em>bool</em>) -- provides the burst bandwidth, otherwise this provides
the standard rate</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>int</strong> with the effective bandwidth rate in bytes per second</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if the call fails and no default was
provided</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.is_geoip_unavailable">
<tt class="descname">is_geoip_unavailable</tt><big>(</big><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.is_geoip_unavailable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.is_geoip_unavailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides <strong>True</strong> if we've concluded hat our geoip database is unavailable,
<strong>False</strong> otherwise. This is determined by having our 'GETINFO
ip-to-country/*' lookups fail so this will default to <strong>False</strong> if we
aren't making those queries.</p>
<p>Geoip failures will be untracked if caching is disabled.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>bool</strong> to indicate if we've concluded our geoip database to be
unavailable or not</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.map_address">
<tt class="descname">map_address</tt><big>(</big><em>mapping</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem/control.html#Controller.map_address"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.control.Controller.map_address" title="Permalink to this definition">¶</a></dt>
<dd><p>Map addresses to replacement addresses. Tor replaces subseqent connections
to the original addresses with the replacement addresses.</p>
<p>If the original address is a null address, i.e., one of '0.0.0.0', '::0', or
'.' Tor picks an original address itself and returns it in the reply. If the
original address is already mapped to a different address the mapping is
removed.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>mapping</strong> (<em>dict</em>) -- mapping of original addresses to replacement addresses</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first simple">
<li><a class="reference internal" href="#stem.InvalidRequest" title="stem.InvalidRequest"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidRequest</span></tt></a> if the addresses are malformed</li>
<li><a class="reference internal" href="#stem.OperationFailed" title="stem.OperationFailed"><tt class="xref py py-class docutils literal"><span class="pre">stem.OperationFailed</span></tt></a> if Tor couldn't fulfill the request</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>dict</strong> with 'original -&gt; replacement' address mappings</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stem.control.Controller.drop_guards">
<tt class="descname">drop_guards</tt><big>(</big><big>)</big><a class="headerlink" href="#stem.control.Controller.drop_guards" title="Permalink to this definition">¶</a></dt>
<dd><p>Drops our present guard nodes and picks a new set.</p>
<p class="versionadded">
<span class="versionmodified">New in version 1.2.0.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a> if Tor couldn't fulfill the request</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<div class="section" id="exceptions-and-attribute-enums">
<h2>Exceptions and Attribute Enums<a class="headerlink" href="#exceptions-and-attribute-enums" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-stem"></span><p>Library for working with the tor process.</p>
<p><strong>Module Overview:</strong></p>
<div class="highlight-python"><pre>ControllerError - Base exception raised when using the controller.
  |- ProtocolError - Malformed socket data.
  |- OperationFailed - Tor was unable to successfully complete the operation.
  |  |- UnsatisfiableRequest - Tor was unable to satisfy a valid request.
  |  |  +- CircuitExtensionFailed - Attempt to make or extend a circuit failed.
  |  |- DescriptorUnavailable - The given relay descriptor is unavailable.
  |  +- InvalidRequest - Invalid request.
  |     +- InvalidArguments - Invalid request parameters.
  +- SocketError - Communication with the socket failed.
     +- SocketClosed - Socket has been shut down.</pre>
</div>
<dl class="data">
<dt id="stem.Runlevel">
<tt class="descclassname">stem.</tt><tt class="descname">Runlevel</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.Runlevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Rating of importance used for event logging.</p>
<table class="docutils" border="1">
<colgroup>
<col width="17%">
<col width="83%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Runlevel</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>ERR</strong></td>
<td>critical issues that impair tor's ability to function</td>
</tr>
<tr class="row-odd"><td><strong>WARN</strong></td>
<td>non-critical issues the user should be aware of</td>
</tr>
<tr class="row-even"><td><strong>NOTICE</strong></td>
<td>information that may be helpful to the user</td>
</tr>
<tr class="row-odd"><td><strong>INFO</strong></td>
<td>high level runtime information</td>
</tr>
<tr class="row-even"><td><strong>DEBUG</strong></td>
<td>low level runtime information</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.Signal">
<tt class="descclassname">stem.</tt><tt class="descname">Signal</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.Signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Signals that the tor process will accept.</p>
<table class="docutils" border="1">
<colgroup>
<col width="17%">
<col width="83%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Signal</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>RELOAD</strong> or <strong>HUP</strong></td>
<td>reloads our torrc</td>
</tr>
<tr class="row-odd"><td><strong>SHUTDOWN</strong> or <strong>INT</strong></td>
<td>shut down, waiting ShutdownWaitLength first if we're a relay</td>
</tr>
<tr class="row-even"><td><strong>DUMP</strong> or <strong>USR1</strong></td>
<td>dumps information about open connections and circuits to our log</td>
</tr>
<tr class="row-odd"><td><strong>DEBUG</strong> or <strong>USR2</strong></td>
<td>switch our logging to the DEBUG runlevel</td>
</tr>
<tr class="row-even"><td><strong>HALT</strong> or <strong>TERM</strong></td>
<td>exit tor immediately</td>
</tr>
<tr class="row-odd"><td><strong>NEWNYM</strong></td>
<td>switch to new circuits, so new application requests don't share any circuits with old ones (this also clears our DNS cache)</td>
</tr>
<tr class="row-even"><td><strong>CLEARDNSCACHE</strong></td>
<td>clears cached DNS results</td>
</tr>
<tr class="row-odd"><td><strong>HEARTBEAT</strong></td>
<td>trigger a heartbeat log message</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.Flag">
<tt class="descclassname">stem.</tt><tt class="descname">Flag</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.Flag" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag assigned to tor relays by the authorities to indicate various
characteristics.</p>
<p><strong>Note:</strong> The BADDIRECTORY flag was <a class="reference external" href="https://gitweb.torproject.org/torspec.git/commit/dir-spec.txt?id=2f012f1">removed from tor</a>.</p>
<table class="docutils" border="1">
<colgroup>
<col width="10%">
<col width="90%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Flag</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>AUTHORITY</strong></td>
<td>relay is a directory authority</td>
</tr>
<tr class="row-odd"><td><strong>BADEXIT</strong></td>
<td>relay shouldn't be used as an exit due to being either problematic or malicious (<a class="reference external" href="https://trac.torproject.org/projects/tor/wiki/doc/badRelays">wiki</a>)</td>
</tr>
<tr class="row-even"><td><strong>BADDIRECTORY</strong></td>
<td>relay shouldn't be used for directory information</td>
</tr>
<tr class="row-odd"><td><strong>EXIT</strong></td>
<td>relay's exit policy makes it more useful as an exit rather than middle hop</td>
</tr>
<tr class="row-even"><td><strong>FAST</strong></td>
<td>relay's suitable for high-bandwidth circuits</td>
</tr>
<tr class="row-odd"><td><strong>GUARD</strong></td>
<td>relay's suitable for being an entry guard (first hop)</td>
</tr>
<tr class="row-even"><td><strong>HSDIR</strong></td>
<td>relay is being used as a v2 hidden service directory</td>
</tr>
<tr class="row-odd"><td><strong>NAMED</strong></td>
<td>relay can be referred to by its nickname</td>
</tr>
<tr class="row-even"><td><strong>RUNNING</strong></td>
<td>relay is currently usable</td>
</tr>
<tr class="row-odd"><td><strong>STABLE</strong></td>
<td>relay's suitable for long-lived circuits</td>
</tr>
<tr class="row-even"><td><strong>UNNAMED</strong></td>
<td>relay isn't currently bound to a nickname</td>
</tr>
<tr class="row-odd"><td><strong>V2DIR</strong></td>
<td>relay supports the v2 directory protocol</td>
</tr>
<tr class="row-even"><td><strong>VALID</strong></td>
<td>relay has been validated</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.CircStatus">
<tt class="descclassname">stem.</tt><tt class="descname">CircStatus</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.CircStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Statuses that a circuit can be in. Tor may provide statuses not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="18%">
<col width="82%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">CircStatus</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>LAUNCHED</strong></td>
<td>new circuit was created</td>
</tr>
<tr class="row-odd"><td><strong>BUILT</strong></td>
<td>circuit finished being created and can accept traffic</td>
</tr>
<tr class="row-even"><td><strong>EXTENDED</strong></td>
<td>circuit has been extended by a hop</td>
</tr>
<tr class="row-odd"><td><strong>FAILED</strong></td>
<td>circuit construction failed</td>
</tr>
<tr class="row-even"><td><strong>CLOSED</strong></td>
<td>circuit has been closed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.CircBuildFlag">
<tt class="descclassname">stem.</tt><tt class="descname">CircBuildFlag</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.CircBuildFlag" title="Permalink to this definition">¶</a></dt>
<dd><p>Attributes about how a circuit is built. These were introduced in tor version
0.2.3.11. Tor may provide flags not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="26%">
<col width="74%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">CircBuildFlag</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>ONEHOP_TUNNEL</strong></td>
<td>single hop circuit to fetch directory information</td>
</tr>
<tr class="row-odd"><td><strong>IS_INTERNAL</strong></td>
<td>circuit that won't be used for client traffic</td>
</tr>
<tr class="row-even"><td><strong>NEED_CAPACITY</strong></td>
<td>circuit only includes high capacity relays</td>
</tr>
<tr class="row-odd"><td><strong>NEED_UPTIME</strong></td>
<td>circuit only includes relays with a high uptime</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.CircPurpose">
<tt class="descclassname">stem.</tt><tt class="descname">CircPurpose</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.CircPurpose" title="Permalink to this definition">¶</a></dt>
<dd><p>Description of what a circuit is intended for. These were introduced in tor
version 0.2.1.6. Tor may provide purposes not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="24%">
<col width="76%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">CircPurpose</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>GENERAL</strong></td>
<td>client traffic or fetching directory information</td>
</tr>
<tr class="row-odd"><td><strong>HS_CLIENT_INTRO</strong></td>
<td>client side introduction point for a hidden service circuit</td>
</tr>
<tr class="row-even"><td><strong>HS_CLIENT_REND</strong></td>
<td>client side hidden service rendezvous circuit</td>
</tr>
<tr class="row-odd"><td><strong>HS_SERVICE_INTRO</strong></td>
<td>server side introduction point for a hidden service circuit</td>
</tr>
<tr class="row-even"><td><strong>HS_SERVICE_REND</strong></td>
<td>server side hidden service rendezvous circuit</td>
</tr>
<tr class="row-odd"><td><strong>TESTING</strong></td>
<td>testing to see if we're reachable, so we can be used as a relay</td>
</tr>
<tr class="row-even"><td><strong>CONTROLLER</strong></td>
<td>circuit that was built by a controller</td>
</tr>
<tr class="row-odd"><td><strong>MEASURE_TIMEOUT</strong></td>
<td>circuit being kept around to see how long it takes</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.CircClosureReason">
<tt class="descclassname">stem.</tt><tt class="descname">CircClosureReason</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.CircClosureReason" title="Permalink to this definition">¶</a></dt>
<dd><p>Reason that a circuit is being closed or failed to be established. Tor may
provide reasons not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="26%">
<col width="74%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">CircClosureReason</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>NONE</strong></td>
<td>no reason given</td>
</tr>
<tr class="row-odd"><td><strong>TORPROTOCOL</strong></td>
<td>violation in the tor protocol</td>
</tr>
<tr class="row-even"><td><strong>INTERNAL</strong></td>
<td>internal error</td>
</tr>
<tr class="row-odd"><td><strong>REQUESTED</strong></td>
<td>requested by the client via a TRUNCATE command</td>
</tr>
<tr class="row-even"><td><strong>HIBERNATING</strong></td>
<td>relay is currently hibernating</td>
</tr>
<tr class="row-odd"><td><strong>RESOURCELIMIT</strong></td>
<td>relay is out of memory, sockets, or circuit IDs</td>
</tr>
<tr class="row-even"><td><strong>CONNECTFAILED</strong></td>
<td>unable to contact the relay</td>
</tr>
<tr class="row-odd"><td><strong>OR_IDENTITY</strong></td>
<td>relay had the wrong OR identification</td>
</tr>
<tr class="row-even"><td><strong>OR_CONN_CLOSED</strong></td>
<td>connection failed after being established</td>
</tr>
<tr class="row-odd"><td><strong>FINISHED</strong></td>
<td>circuit has expired (see tor's MaxCircuitDirtiness config option)</td>
</tr>
<tr class="row-even"><td><strong>TIMEOUT</strong></td>
<td>circuit construction timed out</td>
</tr>
<tr class="row-odd"><td><strong>DESTROYED</strong></td>
<td>circuit unexpectedly closed</td>
</tr>
<tr class="row-even"><td><strong>NOPATH</strong></td>
<td>not enough relays to make a circuit</td>
</tr>
<tr class="row-odd"><td><strong>NOSUCHSERVICE</strong></td>
<td>requested hidden service does not exist</td>
</tr>
<tr class="row-even"><td><strong>MEASUREMENT_EXPIRED</strong></td>
<td>same as <strong>TIMEOUT</strong> except that it was left open for measurement purposes</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.CircEvent">
<tt class="descclassname">stem.</tt><tt class="descname">CircEvent</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.CircEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Type of change reflected in a circuit by a CIRC_MINOR event. Tor may provide
event types not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="26%">
<col width="74%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">CircEvent</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>PURPOSE_CHANGED</strong></td>
<td>circuit purpose or hidden service state has changed</td>
</tr>
<tr class="row-odd"><td><strong>CANNIBALIZED</strong></td>
<td>circuit connections are being reused for a different circuit</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.HiddenServiceState">
<tt class="descclassname">stem.</tt><tt class="descname">HiddenServiceState</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.HiddenServiceState" title="Permalink to this definition">¶</a></dt>
<dd><p>State that a hidden service circuit can have. These were introduced in tor
version 0.2.3.11. Tor may provide states not in this enum.</p>
<p>Enumerations fall into four groups based on their prefix...</p>
<table class="docutils" border="1">
<colgroup>
<col width="18%">
<col width="82%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Prefix</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>HSCI_*</td>
<td>client-side introduction-point</td>
</tr>
<tr class="row-odd"><td>HSCR_*</td>
<td>client-side rendezvous-point</td>
</tr>
<tr class="row-even"><td>HSSI_*</td>
<td>service-side introduction-point</td>
</tr>
<tr class="row-odd"><td>HSSR_*</td>
<td>service-side rendezvous-point</td>
</tr>
</tbody>
</table>
<table class="docutils" border="1">
<colgroup>
<col width="35%">
<col width="65%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HiddenServiceState</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>HSCI_CONNECTING</strong></td>
<td>connecting to the introductory point</td>
</tr>
<tr class="row-odd"><td><strong>HSCI_INTRO_SENT</strong></td>
<td>sent INTRODUCE1 and awaiting a reply</td>
</tr>
<tr class="row-even"><td><strong>HSCI_DONE</strong></td>
<td>received a reply, circuit is closing</td>
</tr>
<tr class="row-odd"><td><strong>HSCR_CONNECTING</strong></td>
<td>connecting to the introductory point</td>
</tr>
<tr class="row-even"><td><strong>HSCR_ESTABLISHED_IDLE</strong></td>
<td>rendezvous-point established, awaiting an introduction</td>
</tr>
<tr class="row-odd"><td><strong>HSCR_ESTABLISHED_WAITING</strong></td>
<td>introduction received, awaiting a rend</td>
</tr>
<tr class="row-even"><td><strong>HSCR_JOINED</strong></td>
<td>connected to the hidden service</td>
</tr>
<tr class="row-odd"><td><strong>HSSI_CONNECTING</strong></td>
<td>connecting to the introductory point</td>
</tr>
<tr class="row-even"><td><strong>HSSI_ESTABLISHED</strong></td>
<td>established introductory point</td>
</tr>
<tr class="row-odd"><td><strong>HSSR_CONNECTING</strong></td>
<td>connecting to the introductory point</td>
</tr>
<tr class="row-even"><td><strong>HSSR_JOINED</strong></td>
<td>connected to the rendezvous-point</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.RelayEndReason">
<tt class="descclassname">stem.</tt><tt class="descname">RelayEndReason</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.RelayEndReason" title="Permalink to this definition">¶</a></dt>
<dd><p>Reasons why the stream is to be closed.</p>
<table class="docutils" border="1">
<colgroup>
<col width="22%">
<col width="78%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">RelayEndReason</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>MISC</strong></td>
<td>none of the following reasons</td>
</tr>
<tr class="row-odd"><td><strong>RESOLVEFAILED</strong></td>
<td>unable to resolve the hostname</td>
</tr>
<tr class="row-even"><td><strong>CONNECTREFUSED</strong></td>
<td>remote host refused the connection</td>
</tr>
<tr class="row-odd"><td><strong>EXITPOLICY</strong></td>
<td>OR refuses to connect to the destination</td>
</tr>
<tr class="row-even"><td><strong>DESTROY</strong></td>
<td>circuit is being shut down</td>
</tr>
<tr class="row-odd"><td><strong>DONE</strong></td>
<td>connection has been closed</td>
</tr>
<tr class="row-even"><td><strong>TIMEOUT</strong></td>
<td>connection timed out</td>
</tr>
<tr class="row-odd"><td><strong>NOROUTE</strong></td>
<td>routing error while contacting the destination</td>
</tr>
<tr class="row-even"><td><strong>HIBERNATING</strong></td>
<td>relay is temporarily hibernating</td>
</tr>
<tr class="row-odd"><td><strong>INTERNAL</strong></td>
<td>internal error at the relay</td>
</tr>
<tr class="row-even"><td><strong>RESOURCELIMIT</strong></td>
<td>relay has insufficient resources to service the request</td>
</tr>
<tr class="row-odd"><td><strong>CONNRESET</strong></td>
<td>connection was unexpectedly reset</td>
</tr>
<tr class="row-even"><td><strong>TORPROTOCOL</strong></td>
<td>violation in the tor protocol</td>
</tr>
<tr class="row-odd"><td><strong>NOTDIRECTORY</strong></td>
<td>directory information requested from a relay that isn't mirroring it</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.StreamStatus">
<tt class="descclassname">stem.</tt><tt class="descname">StreamStatus</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.StreamStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>State that a stream going through tor can have. Tor may provide states not in
this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="27%">
<col width="73%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">StreamStatus</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>NEW</strong></td>
<td>request for a new connection</td>
</tr>
<tr class="row-odd"><td><strong>NEWRESOLVE</strong></td>
<td>request to resolve an address</td>
</tr>
<tr class="row-even"><td><strong>REMAP</strong></td>
<td>address is being re-mapped to another</td>
</tr>
<tr class="row-odd"><td><strong>SENTCONNECT</strong></td>
<td>sent a connect cell along a circuit</td>
</tr>
<tr class="row-even"><td><strong>SENTRESOLVE</strong></td>
<td>sent a resolve cell along a circuit</td>
</tr>
<tr class="row-odd"><td><strong>SUCCEEDED</strong></td>
<td>stream has been established</td>
</tr>
<tr class="row-even"><td><strong>FAILED</strong></td>
<td>stream is detached, and won't be re-established</td>
</tr>
<tr class="row-odd"><td><strong>DETACHED</strong></td>
<td>stream is detached, but might be re-established</td>
</tr>
<tr class="row-even"><td><strong>CLOSED</strong></td>
<td>stream has closed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.StreamClosureReason">
<tt class="descclassname">stem.</tt><tt class="descname">StreamClosureReason</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.StreamClosureReason" title="Permalink to this definition">¶</a></dt>
<dd><p>Reason that a stream is being closed or failed to be established. This
includes all values in the <a class="reference internal" href="#stem.RelayEndReason" title="stem.RelayEndReason"><tt class="xref py py-data docutils literal"><span class="pre">RelayEndReason</span></tt></a> enumeration as
well as the following. Tor may provide reasons not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="27%">
<col width="73%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">StreamClosureReason</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>END</strong></td>
<td>endpoint has sent a RELAY_END cell</td>
</tr>
<tr class="row-odd"><td><strong>PRIVATE_ADDR</strong></td>
<td>endpoint was a private address (127.0.0.1, 10.0.0.1, etc)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.StreamSource">
<tt class="descclassname">stem.</tt><tt class="descname">StreamSource</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.StreamSource" title="Permalink to this definition">¶</a></dt>
<dd><p>Cause of a stream being remapped to another address. Tor may provide sources
not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="23%">
<col width="77%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">StreamSource</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>CACHE</strong></td>
<td>tor is remapping because of a cached answer</td>
</tr>
<tr class="row-odd"><td><strong>EXIT</strong></td>
<td>exit relay requested the remap</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.StreamPurpose">
<tt class="descclassname">stem.</tt><tt class="descname">StreamPurpose</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.StreamPurpose" title="Permalink to this definition">¶</a></dt>
<dd><p>Purpsoe of the stream. This is only provided with new streams and tor may
provide purposes not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="21%">
<col width="79%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">StreamPurpose</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>DIR_FETCH</strong></td>
<td>fetching directory information (descriptors, consensus, etc)</td>
</tr>
<tr class="row-odd"><td><strong>DIR_UPLOAD</strong></td>
<td>uploading our descriptor to an authority</td>
</tr>
<tr class="row-even"><td><strong>DNS_REQUEST</strong></td>
<td>user initiated DNS request</td>
</tr>
<tr class="row-odd"><td><strong>DIRPORT_TEST</strong></td>
<td>checking that our directory port is reachable externally</td>
</tr>
<tr class="row-even"><td><strong>USER</strong></td>
<td>either relaying user traffic or not one of the above categories</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.ORStatus">
<tt class="descclassname">stem.</tt><tt class="descname">ORStatus</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.ORStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>State that an OR connection can have. Tor may provide states not in this
enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="19%">
<col width="81%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ORStatus</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>NEW</strong></td>
<td>received OR connection, starting server-side handshake</td>
</tr>
<tr class="row-odd"><td><strong>LAUNCHED</strong></td>
<td>launched outbound OR connection, starting client-side handshake</td>
</tr>
<tr class="row-even"><td><strong>CONNECTED</strong></td>
<td>OR connection has been established</td>
</tr>
<tr class="row-odd"><td><strong>FAILED</strong></td>
<td>attempt to establish OR connection failed</td>
</tr>
<tr class="row-even"><td><strong>CLOSED</strong></td>
<td>OR connection has been closed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.ORClosureReason">
<tt class="descclassname">stem.</tt><tt class="descname">ORClosureReason</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.ORClosureReason" title="Permalink to this definition">¶</a></dt>
<dd><p>Reason that an OR connection is being closed or failed to be established. Tor
may provide reasons not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="19%">
<col width="81%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ORClosureReason</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>DONE</strong></td>
<td>OR connection shut down cleanly</td>
</tr>
<tr class="row-odd"><td><strong>CONNECTREFUSED</strong></td>
<td>got a ECONNREFUSED when connecting to the relay</td>
</tr>
<tr class="row-even"><td><strong>IDENTITY</strong></td>
<td>identity of the relay wasn't what we expected</td>
</tr>
<tr class="row-odd"><td><strong>CONNECTRESET</strong></td>
<td>got a ECONNRESET or similar error from relay</td>
</tr>
<tr class="row-even"><td><strong>TIMEOUT</strong></td>
<td>got a ETIMEOUT or similar error from relay</td>
</tr>
<tr class="row-odd"><td><strong>NOROUTE</strong></td>
<td>got a ENOTCONN, ENETUNREACH, ENETDOWN, EHOSTUNREACH, or similar error from relay</td>
</tr>
<tr class="row-even"><td><strong>IOERROR</strong></td>
<td>got a different kind of error from relay</td>
</tr>
<tr class="row-odd"><td><strong>RESOURCELIMIT</strong></td>
<td>relay has insufficient resources to service the request</td>
</tr>
<tr class="row-even"><td><strong>MISC</strong></td>
<td>connection refused for another reason</td>
</tr>
<tr class="row-odd"><td><strong>PT_MISSING</strong></td>
<td>no pluggable transport was available</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.AuthDescriptorAction">
<tt class="descclassname">stem.</tt><tt class="descname">AuthDescriptorAction</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.AuthDescriptorAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Actions that directory authorities might take with relay descriptors. Tor may
provide reasons not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="29%">
<col width="71%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">AuthDescriptorAction</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>ACCEPTED</strong></td>
<td>accepting the descriptor as the newest version</td>
</tr>
<tr class="row-odd"><td><strong>DROPPED</strong></td>
<td>descriptor rejected without notifying the relay</td>
</tr>
<tr class="row-even"><td><strong>REJECTED</strong></td>
<td>relay notified that its descriptor has been rejected</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.StatusType">
<tt class="descclassname">stem.</tt><tt class="descname">StatusType</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.StatusType" title="Permalink to this definition">¶</a></dt>
<dd><p>Sources for tor status events. Tor may provide types not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="18%">
<col width="82%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">StatusType</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>GENERAL</strong></td>
<td>general tor activity, not specifically as a client or relay</td>
</tr>
<tr class="row-odd"><td><strong>CLIENT</strong></td>
<td>related to our activity as a tor client</td>
</tr>
<tr class="row-even"><td><strong>SERVER</strong></td>
<td>related to our activity as a tor relay</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.GuardType">
<tt class="descclassname">stem.</tt><tt class="descname">GuardType</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.GuardType" title="Permalink to this definition">¶</a></dt>
<dd><p>Use a guard relay can be for. Tor may provide types not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="24%">
<col width="76%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GuardType</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>ENTRY</strong></td>
<td>used to connect to the tor network</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.GuardStatus">
<tt class="descclassname">stem.</tt><tt class="descname">GuardStatus</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.GuardStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Status a guard relay can have. Tor may provide types not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="17%">
<col width="83%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GuardStatus</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>NEW</strong></td>
<td>new guard that we weren't previously using</td>
</tr>
<tr class="row-odd"><td><strong>DROPPED</strong></td>
<td>removed from use as one of our guards</td>
</tr>
<tr class="row-even"><td><strong>UP</strong></td>
<td>guard is now reachable</td>
</tr>
<tr class="row-odd"><td><strong>DOWN</strong></td>
<td>guard is now unreachable</td>
</tr>
<tr class="row-even"><td><strong>BAD</strong></td>
<td>consensus or relay considers this relay to be unusable as a guard</td>
</tr>
<tr class="row-odd"><td><strong>GOOD</strong></td>
<td>consensus or relay considers this relay to be usable as a guard</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.TimeoutSetType">
<tt class="descclassname">stem.</tt><tt class="descname">TimeoutSetType</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.TimeoutSetType" title="Permalink to this definition">¶</a></dt>
<dd><p>Way in which the timeout value of a circuit is changing. Tor may provide
types not in this enum.</p>
<table class="docutils" border="1">
<colgroup>
<col width="17%">
<col width="83%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">TimeoutSetType</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>COMPUTED</strong></td>
<td>tor has computed a new timeout based on prior circuits</td>
</tr>
<tr class="row-odd"><td><strong>RESET</strong></td>
<td>timeout reverted to its default</td>
</tr>
<tr class="row-even"><td><strong>SUSPENDED</strong></td>
<td>timeout reverted to its default until network connectivity has recovered</td>
</tr>
<tr class="row-odd"><td><strong>DISCARD</strong></td>
<td>throwing out timeout value from when the network was down</td>
</tr>
<tr class="row-even"><td><strong>RESUME</strong></td>
<td>resumed calculations to determine the proper timeout</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.ConnectionType">
<tt class="descclassname">stem.</tt><tt class="descname">ConnectionType</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.ConnectionType" title="Permalink to this definition">¶</a></dt>
<dd><p>Purpose for a tor connection. Tor may provide types not in this enum.</p>
<p>The meaning behind these values is a bit unclear, pending <a class="reference external" href="https://trac.torproject.org/10086">ticket 10086</a>.</p>
<table class="docutils" border="1">
<colgroup>
<col width="18%">
<col width="82%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ConnectionType</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>OR</strong></td>
<td>carrying traffic within the tor network</td>
</tr>
<tr class="row-odd"><td><strong>DIR</strong></td>
<td>fetching or sending tor descriptor data</td>
</tr>
<tr class="row-even"><td><strong>EXIT</strong></td>
<td>carrying traffic between the tor network and an external destination</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.TokenBucket">
<tt class="descclassname">stem.</tt><tt class="descname">TokenBucket</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.TokenBucket" title="Permalink to this definition">¶</a></dt>
<dd><p>Bucket categories of TB_EMPTY events.</p>
<table class="docutils" border="1">
<colgroup>
<col width="33%">
<col width="67%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">TokenBucket</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>GLOBAL</strong></td>
<td>global token bucket</td>
</tr>
<tr class="row-odd"><td><strong>RELAY</strong></td>
<td>relay token bucket</td>
</tr>
<tr class="row-even"><td><strong>ORCONN</strong></td>
<td>bucket used for OR connections</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.HSDescAction">
<tt class="descclassname">stem.</tt><tt class="descname">HSDescAction</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.HSDescAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Action beeing taken in a HS_DESC event.</p>
<table class="docutils" border="1">
<colgroup>
<col width="17%">
<col width="83%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HSDescAction</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>REQUESTED</strong></td>
<td>uncached hidden service descriptor is being requested</td>
</tr>
<tr class="row-odd"><td><strong>UPLOAD</strong></td>
<td>descriptor is being uploaded with HSPOST</td>
</tr>
<tr class="row-even"><td><strong>RECEIVED</strong></td>
<td>hidden service descriptor has been retrieved</td>
</tr>
<tr class="row-odd"><td><strong>UPLOADED</strong></td>
<td>descriptor was uploaded with HSPOST</td>
</tr>
<tr class="row-even"><td><strong>IGNORE</strong></td>
<td>fetched descriptor was ignored because we already have its v0 descriptor</td>
</tr>
<tr class="row-odd"><td><strong>FAILED</strong></td>
<td>we were unable to retrieve the descriptor</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.HSDescReason">
<tt class="descclassname">stem.</tt><tt class="descname">HSDescReason</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.HSDescReason" title="Permalink to this definition">¶</a></dt>
<dd><p>Reason for the hidden service descriptor to fail to be fetched.</p>
<table class="docutils" border="1">
<colgroup>
<col width="25%">
<col width="75%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HSDescReason</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>BAD_DESC</strong></td>
<td>descriptor was unparseable</td>
</tr>
<tr class="row-odd"><td><strong>QUERY_REJECTED</strong></td>
<td>hidden service directory refused to provide the descriptor</td>
</tr>
<tr class="row-even"><td><strong>UPLOAD_REJECTED</strong></td>
<td>descriptor was rejected by the hidden service directory</td>
</tr>
<tr class="row-odd"><td><strong>NOT_FOUND</strong></td>
<td>descriptor with the given identifier wasn't found</td>
</tr>
<tr class="row-even"><td><strong>UNEXPECTED</strong></td>
<td>failure type is unknown</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="stem.HSAuth">
<tt class="descclassname">stem.</tt><tt class="descname">HSAuth</tt><big>(</big><em>enum</em><big>)</big><a class="headerlink" href="#stem.HSAuth" title="Permalink to this definition">¶</a></dt>
<dd><p>Type of authentication being used for a HS_DESC event.</p>
<table class="docutils" border="1">
<colgroup>
<col width="18%">
<col width="82%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">HSAuth</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>NO_AUTH</strong></td>
<td>no authentication</td>
</tr>
<tr class="row-odd"><td><strong>BASIC_AUTH</strong></td>
<td>general hidden service authentication</td>
</tr>
<tr class="row-even"><td><strong>STEALTH_AUTH</strong></td>
<td>authentication method that hides service activity from unauthorized clients</td>
</tr>
<tr class="row-odd"><td><strong>UNKNOWN</strong></td>
<td>unrecognized method of authentication</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="stem.ControllerError">
<em class="property">exception </em><tt class="descclassname">stem.</tt><tt class="descname">ControllerError</tt><a class="reference internal" href="https://stem.torproject.org/_modules/stem.html#ControllerError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.ControllerError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></tt></p>
<p>Base error for controller communication issues.</p>
</dd></dl>

<dl class="exception">
<dt id="stem.ProtocolError">
<em class="property">exception </em><tt class="descclassname">stem.</tt><tt class="descname">ProtocolError</tt><a class="reference internal" href="https://stem.torproject.org/_modules/stem.html#ProtocolError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.ProtocolError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a></p>
<p>Malformed content from the control socket.</p>
</dd></dl>

<dl class="exception">
<dt id="stem.OperationFailed">
<em class="property">exception </em><tt class="descclassname">stem.</tt><tt class="descname">OperationFailed</tt><big>(</big><em>code=None</em>, <em>message=None</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem.html#OperationFailed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.OperationFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a></p>
<p>Base exception class for failed operations that return an error code</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><strong>code</strong> (<em>str</em>) -- error code returned by Tor</li>
<li><strong>message</strong> (<em>str</em>) -- error message returned by Tor or a human readable error
message</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="stem.UnsatisfiableRequest">
<em class="property">exception </em><tt class="descclassname">stem.</tt><tt class="descname">UnsatisfiableRequest</tt><big>(</big><em>code=None</em>, <em>message=None</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem.html#UnsatisfiableRequest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.UnsatisfiableRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stem.OperationFailed" title="stem.OperationFailed"><tt class="xref py py-class docutils literal"><span class="pre">stem.OperationFailed</span></tt></a></p>
<p>Exception raised if Tor was unable to process our request.</p>
</dd></dl>

<dl class="exception">
<dt id="stem.CircuitExtensionFailed">
<em class="property">exception </em><tt class="descclassname">stem.</tt><tt class="descname">CircuitExtensionFailed</tt><big>(</big><em>message</em>, <em>circ=None</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem.html#CircuitExtensionFailed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.CircuitExtensionFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stem.UnsatisfiableRequest" title="stem.UnsatisfiableRequest"><tt class="xref py py-class docutils literal"><span class="pre">stem.UnsatisfiableRequest</span></tt></a></p>
<p>An attempt to create or extend a circuit failed.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><strong>circ</strong> (<em>stem.response.CircuitEvent</em>) -- response notifying us of the failure</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="stem.DescriptorUnavailable">
<em class="property">exception </em><tt class="descclassname">stem.</tt><tt class="descname">DescriptorUnavailable</tt><big>(</big><em>message</em><big>)</big><a class="headerlink" href="#stem.DescriptorUnavailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stem.OperationFailed" title="stem.OperationFailed"><tt class="xref py py-class docutils literal"><span class="pre">stem.OperationFailed</span></tt></a></p>
<p>Tor was unable to provide a descriptor for the given relay.</p>
</dd></dl>

<dl class="exception">
<dt id="stem.InvalidRequest">
<em class="property">exception </em><tt class="descclassname">stem.</tt><tt class="descname">InvalidRequest</tt><big>(</big><em>code=None</em>, <em>message=None</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem.html#InvalidRequest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.InvalidRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stem.OperationFailed" title="stem.OperationFailed"><tt class="xref py py-class docutils literal"><span class="pre">stem.OperationFailed</span></tt></a></p>
<p>Exception raised when the request was invalid or malformed.</p>
</dd></dl>

<dl class="exception">
<dt id="stem.InvalidArguments">
<em class="property">exception </em><tt class="descclassname">stem.</tt><tt class="descname">InvalidArguments</tt><big>(</big><em>code=None</em>, <em>message=None</em>, <em>arguments=None</em><big>)</big><a class="reference internal" href="https://stem.torproject.org/_modules/stem.html#InvalidArguments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.InvalidArguments" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stem.InvalidRequest" title="stem.InvalidRequest"><tt class="xref py py-class docutils literal"><span class="pre">stem.InvalidRequest</span></tt></a></p>
<p>Exception class for requests which had invalid arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<colgroup><col class="field-name">
<col class="field-body">
</colgroup><tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><ul class="first last simple">
<li><strong>code</strong> (<em>str</em>) -- error code returned by Tor</li>
<li><strong>message</strong> (<em>str</em>) -- error message returned by Tor or a human readable error
message</li>
<li><strong>arguments</strong> (<em>list</em>) -- a list of arguments which were invalid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="stem.SocketError">
<em class="property">exception </em><tt class="descclassname">stem.</tt><tt class="descname">SocketError</tt><a class="reference internal" href="https://stem.torproject.org/_modules/stem.html#SocketError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.SocketError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stem.ControllerError" title="stem.ControllerError"><tt class="xref py py-class docutils literal"><span class="pre">stem.ControllerError</span></tt></a></p>
<p>Error arose while communicating with the control socket.</p>
</dd></dl>

<dl class="exception">
<dt id="stem.SocketClosed">
<em class="property">exception </em><tt class="descclassname">stem.</tt><tt class="descname">SocketClosed</tt><a class="reference internal" href="https://stem.torproject.org/_modules/stem.html#SocketClosed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#stem.SocketClosed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stem.SocketError" title="stem.SocketError"><tt class="xref py py-class docutils literal"><span class="pre">stem.SocketError</span></tt></a></p>
<p>Control socket was closed before completing the message.</p>
</dd></dl>

</div>
</div>


      </div>
      <div class="bottomnav">
      </div>

    <div class="footer">
    </div>
  
</body></html>